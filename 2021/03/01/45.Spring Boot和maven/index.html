

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;dark&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="">
  <meta name="keywords" content="">
  
  <title>Spring Boot和maven - Jiang Space</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","version":"1.8.9","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 6.2.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>Jiang Space</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Spring Boot和maven">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2021-03-01 21:37" pubdate>
        2021年3月1日 晚上
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      3.9k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      63
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Spring Boot和maven</h1>
            
            <div class="markdown-body">
              <h2 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><hr>
<p>Spring Boot是便捷搭建基于Spring的工程脚手架。其最主要作用就是帮助开发人员快速的构建庞大的spring项目，并且尽可能的减少一切xml配置，做到开箱即用，迅速上手，让开发人员关注业务而非配置。</p>
<p>我们可以使用Spring Boot创建java应用，并使用<code>java –jar</code> 启动它，就能得到一个生产级别的web工程。</p>
<hr>
<h3 id="快速搭建"><a href="#快速搭建" class="headerlink" title="快速搭建"></a>快速搭建</h3><hr>
<p><code>Spring Initializr</code>（jdk1.8默认即可）–&gt; 完善项目信息 –&gt; <code>spring web starter</code></p>
<p>pom.xml文件：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.5.1&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;HelloSpringBoot&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;HelloSpringBoot&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>Application文件：</p>
<pre><code>@SpringBootApplication
public class HelloSpringBootApplication &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(HelloSpringBootApplication.class, args);
    &#125;
&#125;
</code></pre>
<p>Controller文件：</p>
<pre><code>import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController &#123;
    @GetMapping(value=&quot;/hello&quot;)
    public String hello()&#123;
        return &quot;Hello Spring Boot&quot;;
    &#125;
&#125;
</code></pre>
<p>访问<code>http://localhost:8080/hello</code>即可以返回<code>Hello Spring Boot</code>。</p>
<hr>
<h3 id="Druid"><a href="#Druid" class="headerlink" title="Druid"></a>Druid</h3><hr>
<p>引入：</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;druid&lt;/artifactId&gt;
    &lt;version&gt;1.1.16&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>写法一：</p>
<p>创建数据库 <code>springboot_test</code> ，在项目resources下新建 <code>jdbc.properties</code> 文件：</p>
<pre><code>jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://192.168.1.13:3306/springboot_test
jdbc.username=root
jdbc.password=123456
</code></pre>
<p><code>JdbcConfig</code> 类:</p>
<pre><code>import com.alibaba.druid.pool.DruidDataSource;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;
import javax.sql.DataSource;

@Configuration
@PropertySource(&quot;classpath:jdbc.properties&quot;)
public class JdbcConfig &#123;
    @Value(&quot;$&#123;jdbc.url&#125;&quot;)
    String url;
    @Value(&quot;$&#123;jdbc.driverClassName&#125;&quot;)
    String driverClassName;
    @Value(&quot;$&#123;jdbc.username&#125;&quot;)
    String username;
    @Value(&quot;$&#123;jdbc.password&#125;&quot;)
    String password;

    @Bean
    public DataSource dataSource() &#123;
        DruidDataSource dataSource = new DruidDataSource();
        dataSource.setDriverClassName(driverClassName);
        dataSource.setUrl(url);
        dataSource.setUsername(username);
        dataSource.setPassword(password);
        return dataSource;
    &#125;
&#125;
</code></pre>
<p>写法二：<code>@ConfigurationProperties</code>可以在类上，也可以在方法上：</p>
<p>在项目resources下 <code>application.properties</code>：</p>
<pre><code>jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://192.168.1.13:3306/springboot_test
jdbc.username=root
jdbc.password=123456
</code></pre>
<p><code>JdbcConfig</code> 类:</p>
<pre><code>import com.alibaba.druid.pool.DruidDataSource;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import javax.sql.DataSource;

@Configuration
public class JdbcConfig &#123;

    //prefix = &quot;jdbc&quot; 中的jdbc指的是 jdbc.password=123456 中的jdbc
    @Bean
    @ConfigurationProperties(prefix = &quot;jdbc&quot;)
    public DataSource dataSource() &#123;
        return new DruidDataSource();
    &#125;
&#125;
</code></pre>
<p>两种写法写完后，使用：</p>
<pre><code>@Autowired
private DataSource dataSource;

System.out.println(&quot;dataSource: &quot; + dataSource);
</code></pre>
<hr>
<h3 id="yml文件配置"><a href="#yml文件配置" class="headerlink" title="yml文件配置"></a>yml文件配置</h3><hr>
<p>yaml与properties配置文件除了展示形式不相同以外，其它功能和作用都是一样的；在项目中原路的读取方式不需要改变。</p>
<p>yml配置文件的特征：树状层级结构展示配置项；配置项之间如果有关系的话需要分行空两格；配置项如果有值的话，那么需要在 <code>:</code>之后空一格再写配置项值；</p>
<pre><code>jdbc:
  driverClassName: com.mysql.jdbc.Driver
  url: jdbc:mysql://127.0.0.1:3306/hehe
  username: root
  password: 123456

key:
  abc: cba
  def:
    - g
    - h
    - j
</code></pre>
<p>多个yml配置文件，在spring boot中是被允许的。这些配置文件的名称必须为 <code>application-***.yml</code>，并且这些配置文件必须要在<code>application.yml</code>配置文件中激活之后才可以使用。</p>
<pre><code>#激活配置文件;需要指定其它的配置文件名称,abc,def就是application-abc.yml，application-def.yml
spring:
  profiles:
    active: abc,def
</code></pre>
<p>如果properties和yml配置文件同时存在在<code>spring boot</code>项目中；那么这两类配置文件都有效。在两个配置文件中如果存在同名的配置项的话会以properties文件的为主。</p>
<hr>
<h3 id="lombok应用"><a href="#lombok应用" class="headerlink" title="lombok应用"></a>lombok应用</h3><hr>
<p>添加lombok对应的依赖到项目pom.xml文件:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>在Bean上使用：</p>
<pre><code>@Data ：自动提供getter和setter、hashCode、equals、toString等方法
@Getter：自动提供getter方法
@Setter：自动提供setter方法
@Slf4j：自动在bean中提供log变量，其实用的是slf4j的日志功能。
</code></pre>
<hr>
<h3 id="修改项目tomcat端口"><a href="#修改项目tomcat端口" class="headerlink" title="修改项目tomcat端口"></a>修改项目tomcat端口</h3><hr>
<p>yml文件方式</p>
<pre><code>#tomcat端口
server:
  port: 80
</code></pre>
<p><code>application.properties</code>中修改端口和path：</p>
<pre><code>server.port=8082
server.servlet.context-path=/shiyanlou/
</code></pre>
<hr>
<h3 id="静态资源"><a href="#静态资源" class="headerlink" title="静态资源"></a>静态资源</h3><hr>
<p>默认的静态资源路径为：</p>
<pre><code>classpath:/META-INF/resources/
classpath:/resources/
classpath:/static/
classpath:/public
</code></pre>
<hr>
<h3 id="SpringMVC拦截器"><a href="#SpringMVC拦截器" class="headerlink" title="SpringMVC拦截器"></a>SpringMVC拦截器</h3><hr>
<p>编写拦截器（实现<code>HandlerInterceptor</code>）:</p>
<pre><code>import lombok.extern.slf4j.Slf4j;
import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@Slf4j
public class MyInterceptor implements HandlerInterceptor &#123;
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;
        log.debug(&quot;这是MyInterceptor的preHandle方法。&quot;);
        return true;
    &#125;

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;
        log.debug(&quot;这是MyInterceptor的postHandle方法。&quot;);
    &#125;

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;
        log.debug(&quot;这是MyInterceptor的afterCompletion方法。&quot;);
    &#125;
&#125;
</code></pre>
<p>编写配置类实现 <code>WebMvcConfigurer</code>，在该类中添加各种组件:</p>
<pre><code>import com.jiangtea.interceptor.MyInterceptor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class MvcConfig implements WebMvcConfigurer &#123;

    //注册拦截器
    @Bean
    public MyInterceptor myInterceptor()&#123;
        return new MyInterceptor();
    &#125;

    //添加拦截器到spring mvc拦截器链
    @Override
    public void addInterceptors(InterceptorRegistry registry) &#123;
        registry.addInterceptor(myInterceptor()).addPathPatterns(&quot;/*&quot;);
    &#125;
&#125;
</code></pre>
<p>设置日志级别：</p>
<pre><code>#日志记录级别
logging:
  level:
    com.jiangtea: debug
    org.springframework: info
</code></pre>
<hr>
<h3 id="整合事务和连接池"><a href="#整合事务和连接池" class="headerlink" title="整合事务和连接池"></a>整合事务和连接池</h3><hr>
<p>配置Spring Boot自带默认的 <code>hikari</code>数据库连接池和使用 <code>@Transactional</code>注解进行事务配置。</p>
<p>pom.xml文件中：</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>application.properties：</p>
<pre><code>spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/springboot_test?useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;useSSL=false
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.pool-name=hikariCP
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.connection-test-query=SELECT 1
</code></pre>
<p>UserService类：</p>
<pre><code>import com.jiangtea.pojo.User;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
public class UserService &#123;
    //根据id查询
    public User queryById(Long id)&#123;
        return new User();
    &#125;
    //新增保存用户
    @Transactional
    public void saveUser(User user)&#123;
        System.out.println(&quot;新增用户... &quot;);
    &#125;
&#125;
</code></pre>
<p>使用：</p>
<pre><code>@Autowired
private DataSource dataSource;
</code></pre>
<hr>
<h3 id="Spring-Boot整合Mybatis"><a href="#Spring-Boot整合Mybatis" class="headerlink" title="Spring Boot整合Mybatis"></a>Spring Boot整合Mybatis</h3><hr>
<p>pom.xml文件中：</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;2.0.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>application.yml配置：</p>
<pre><code>mybatis:
  # 实体类别名包路径
  type-aliases-package: com.jiangtea.pojo
  # 映射文件路径
  # mapper-locations: classpath:mappers/*.xml
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
</code></pre>
<p>扫描mybatis所有的业务mapper接口配置：</p>
<pre><code>import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
// 扫描mybatis所有的业务mapper接口
@MapperScan(&quot;com.jiangtea.mapper&quot;)
public class HelloSpringBootApplication &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(HelloSpringBootApplication.class, args);
    &#125;
&#125;
</code></pre>
<hr>
<h3 id="整合通用Mapper"><a href="#整合通用Mapper" class="headerlink" title="整合通用Mapper"></a>整合通用Mapper</h3><hr>
<p>pom.xml文件中：</p>
<pre><code>&lt;!-- 通用mapper --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;tk.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mapper-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;2.1.5&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>继承<code>Mapper&lt;User&gt;</code>:</p>
<pre><code>import com.jiangtea.pojo.User;
import tk.mybatis.mapper.common.Mapper;

public interface UserMapper extends Mapper&lt;User&gt; &#123;
&#125;
</code></pre>
<p>修改启动引导类Application中的Mapper扫描注解，注意修改成<code>tk.mybatis.spring.annotation.MapperScan</code>:</p>
<pre><code>import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import tk.mybatis.spring.annotation.MapperScan;

@SpringBootApplication
// 扫描mybatis所有的业务mapper接口
@MapperScan(&quot;com.jiangtea.mapper&quot;)
public class HelloSpringBootApplication &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(HelloSpringBootApplication.class, args);
    &#125;
&#125;
</code></pre>
<p>修改User实体类添加jpa注解:</p>
<pre><code>import lombok.Data;
import tk.mybatis.mapper.annotation.KeySql;
import javax.persistence.Id;
import javax.persistence.Table;
import java.util.Date;

@Data
@Table(name = &quot;tb_user&quot;)
public class User &#123;
    @Id
    //主键回填
    @KeySql(useGeneratedKeys = true)
    private Long id;
    private String userName;
    private String password;
    private String name;
    private Integer age;
    private Integer sex;
    private Date birthday;
    private String note;
    private Date created;
    private Date updated;
&#125;
</code></pre>
<p>UserService：</p>
<pre><code>import com.jiangtea.mapper.UserMapper;
import com.jiangtea.pojo.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
public class UserService &#123;
    @Autowired
    private UserMapper userMapper;
    //根据id查询
    public User queryById(Long id)&#123;
        return userMapper.selectByPrimaryKey(id);
    &#125;
    //新增保存用户
    @Transactional
    public void saveUser(User user)&#123;
        System.out.println(&quot;新增用户... &quot;);
        //选择性新增；如果属性为空则该属性不会出现在insert语句上
        userMapper.insertSelective(user);
        int i = 1/0;
    &#125;
&#125;
</code></pre>
<p>编写Controller：</p>
<pre><code>import com.jiangtea.pojo.User;
import com.jiangtea.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;
import javax.sql.DataSource;

@RestController
public class HelloController &#123;

    @Autowired
    private DataSource dataSource;

    @Autowired
    private UserService userService;

    /**
     * 根据用户id查询用户
     * @param id 用户id
     * @return 用户
     */
    @GetMapping(&quot;/user/&#123;id&#125;&quot;)
    public User queryById(@PathVariable Long id)&#123;
        return userService.queryById(id);
    &#125;
    @GetMapping(&quot;hello&quot;)
    public String hello()&#123;
        System.out.println(&quot; DataSource = &quot; + dataSource);
        return &quot;Hello, Spring Boot!&quot;;
    &#125;
&#125;
</code></pre>
<p>开始测试-测试地址：<code>http://localhost:8082/user/7</code> :</p>
<hr>
<h3 id="Spring-Boot整合Junit"><a href="#Spring-Boot整合Junit" class="headerlink" title="Spring Boot整合Junit"></a>Spring Boot整合Junit</h3><hr>
<p>添加依赖：</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>在类UserService上按 <code>ctrl+shift+T</code> 选择 <code>JUnit4</code> 创建测试类：</p>
<pre><code>import com.jiangtea.pojo.User;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.Date;
@RunWith(SpringRunner.class)
@SpringBootTest
public class UserServiceTest &#123;
    @Autowired
    private UserService userService;
    @Test
    public void queryById() &#123;
        User user = userService.queryById(8L);
        System.out.println(&quot;user = &quot; + user);
    &#125;
    @Test
    public void saveUser() &#123;
        User user = new User();
        user.setUserName(&quot;test2&quot;);
        user.setName(&quot;test2&quot;);
        user.setAge(13);
        user.setPassword(&quot;123456&quot;);
        user.setSex(1);
        user.setCreated(new Date());
        userService.saveUser(user);
    &#125;
&#125;
</code></pre>
<p>注意添加 <code>@SpringBootTest</code>。</p>
<hr>
<h3 id="Spring-Boot整合redis"><a href="#Spring-Boot整合redis" class="headerlink" title="Spring Boot整合redis"></a>Spring Boot整合redis</h3><hr>
<p>添加依赖:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>配置application.yml中修改redis的连接参数（redis需要启动）:</p>
<pre><code>spring:
  redis:
    host: localhost
    port: 6379
</code></pre>
<p>编写测试类应用RedisTemplate操作redis中的5种数据类型（string&#x2F;hash&#x2F;list&#x2F;set&#x2F;sorted set）</p>
<pre><code>import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;
import java.util.Set;

@RunWith(SpringRunner.class)
@SpringBootTest
public class RedisTest &#123;

    @Autowired
    private RedisTemplate redisTemplate;

    @Test
    public void test()&#123;
        //string 字符串
        //redisTemplate.opsForValue().set(&quot;str&quot;, &quot;hehe&quot;);
        redisTemplate.boundValueOps(&quot;str&quot;).set(&quot;hehe&quot;);
        System.out.println(&quot;str = &quot; + redisTemplate.opsForValue().get(&quot;str&quot;));

        //hash 散列
        redisTemplate.boundHashOps(&quot;h_key&quot;).put(&quot;name&quot;, &quot;hehe&quot;);
        redisTemplate.boundHashOps(&quot;h_key&quot;).put(&quot;age&quot;, 13);
        //获取所有域
        Set set = redisTemplate.boundHashOps(&quot;h_key&quot;).keys();
        System.out.println(&quot; hash散列的所有域：&quot; + set);
        //获取所有值
        List list = redisTemplate.boundHashOps(&quot;h_key&quot;).values();
        System.out.println(&quot; hash散列的所有域的值：&quot; + list);

        //list 列表
        redisTemplate.boundListOps(&quot;l_key&quot;).leftPush(&quot;c&quot;);
        redisTemplate.boundListOps(&quot;l_key&quot;).leftPush(&quot;b&quot;);
        redisTemplate.boundListOps(&quot;l_key&quot;).leftPush(&quot;a&quot;);
        //获取全部元素
        list = redisTemplate.boundListOps(&quot;l_key&quot;).range(0, -1);
        System.out.println(&quot; list列表中的所有元素：&quot; + list);

        // set 集合
        redisTemplate.boundSetOps(&quot;s_key&quot;).add(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);
        set = redisTemplate.boundSetOps(&quot;s_key&quot;).members();
        System.out.println(&quot; set集合中的所有元素：&quot; + set);

        // sorted set 有序集合
        redisTemplate.boundZSetOps(&quot;z_key&quot;).add(&quot;a&quot;, 30);
        redisTemplate.boundZSetOps(&quot;z_key&quot;).add(&quot;b&quot;, 20);
        redisTemplate.boundZSetOps(&quot;z_key&quot;).add(&quot;c&quot;, 10);
        set = redisTemplate.boundZSetOps(&quot;z_key&quot;).range(0, -1);
        System.out.println(&quot; zset有序集合中的所有元素：&quot; + set);
    &#125;
&#125;
</code></pre>
<hr>
<h3 id="Spring-Boot项目部署"><a href="#Spring-Boot项目部署" class="headerlink" title="Spring Boot项目部署"></a>Spring Boot项目部署</h3><hr>
<p>pom添加打包组件:</p>
<pre><code>&lt;build&gt;
  &lt;plugins&gt;
     &lt;!-- 打jar包时如果不配置该插件，打出来的jar包没有清单文件 --&gt;
      &lt;plugin&gt;
          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
          &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<p>可以点击右边栏maven的Lifecycle中的<code>package</code>进行打包。</p>
<p>部署：<code>java -jar 打好的jar包名字</code>。</p>
<hr>
<h2 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><hr>
<p>maven 是一个项目管理工具，主要作用是在项目开发阶段对Java项目进行依赖管理和项目构建。</p>
<p>依赖管理：就是对jar包的管理。通过导入maven坐标，就相当于将仓库中的jar包导入了当前项目中。</p>
<p>项目构建：通过maven的一个命令就可以完成项目从清理、编译、测试、报告、打包，部署整个过程。</p>
<p>maven常用命令：clean(清理)、compile(编译)、test(测试)、package(打包)、install(安装)。</p>
<hr>
<h3 id="maven的依赖范围"><a href="#maven的依赖范围" class="headerlink" title="maven的依赖范围"></a>maven的依赖范围</h3><hr>
<p>maven的依赖范围：</p>
<table>
<thead>
<tr>
<th>依赖范围</th>
<th>对于编译classpath有效</th>
<th>对于测试classpath有效</th>
<th>对于运行时classpath有效</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>compile</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>spring-core</td>
</tr>
<tr>
<td>test</td>
<td>-</td>
<td>Y</td>
<td>-</td>
<td>Junit</td>
</tr>
<tr>
<td>provided</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>servlet-api</td>
</tr>
<tr>
<td>runtime</td>
<td>-</td>
<td>Y</td>
<td>Y</td>
<td>JDBC驱动</td>
</tr>
<tr>
<td>system</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>本地的，maven仓库之外的类库</td>
</tr>
</tbody></table>
<p>通过<code>scope</code>指定依赖范围，默认是<code>compile</code>：</p>
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.12&lt;/version&gt;
        &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;
</code></pre>
<hr>
<h3 id="maven的依赖冲突"><a href="#maven的依赖冲突" class="headerlink" title="maven的依赖冲突"></a>maven的依赖冲突</h3><hr>
<p>排除依赖：可以使用<code>exclusions</code>标签将传递过来的依赖排除出去。</p>
<pre><code>&lt;exclusions&gt;
    &lt;exclusion&gt;
    ....
    &lt;/exclusion&gt;
&lt;/exclusions&gt;
</code></pre>
<p>版本锁定:采用直接锁定版本的方法确定依赖jar包的版本，版本锁定后则不考虑依赖的声明顺序或依赖的路径，以锁定的版本为准添加到工程中，此方法在企业开发中经常使用。</p>
<p>版本锁定的使用方式：第一步：在dependencyManagement标签中锁定依赖的版本;第二步：在dependencies标签中声明需要导入的maven坐标。</p>
<pre><code>&lt;!--锁定jar包的版本--&gt;
&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
            &lt;version&gt;5.0.5.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
            &lt;version&gt;5.0.5.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.12&lt;/version&gt;
        &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;
</code></pre>
<hr>
<h3 id="maven分模块构建"><a href="#maven分模块构建" class="headerlink" title="maven分模块构建"></a>maven分模块构建</h3><hr>
<p>分模块父工程的打包方式必须为pom：</p>
<pre><code>&lt;!--父工程的打包方式必须为pom--&gt;
&lt;packaging&gt;pom&lt;/packaging&gt;
</code></pre>
<p>子工程：</p>
<pre><code>&lt;!--表示当前maven工程继承了maven_parent父工程--&gt;
&lt;parent&gt;
    &lt;artifactId&gt;maven_parent&lt;/artifactId&gt;
    &lt;groupId&gt;com.study&lt;/groupId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;
</code></pre>
<p>当前子工程依赖 子工程maven_dao：</p>
<pre><code>&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.study&lt;/groupId&gt;
        &lt;artifactId&gt;maven_dao&lt;/artifactId&gt;
        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>maven工程的聚合：在maven工程的<code>pom.xml</code>文件中可以使用<code>&lt;modules&gt;</code>标签将其他maven工程聚合到一起，聚合的目的是为了进行统一操作。例如拆分后的maven工程有多个，如果要进行打包，就需要针对每个工程分别执行打包命令，操作起来非常繁琐。这时就可以使用<code>&lt;modules&gt;</code>标签将这些工程统一聚合到maven工程中，需要打包的时候，只需要在此工程中执行一次打包命令，其下被聚合的工程就都会被打包了。</p>
<hr>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Java/">Java</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/maven/">maven</a>
                    
                      <a class="hover-with-bg" href="/tags/Spring-Boot/">Spring Boot</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2021/04/07/46.%E9%87%8F%E5%8C%96%E6%9D%82%E8%AE%B0/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">量化杂记</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/11/06/44.JVM%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/">
                        <span class="hidden-mobile">JVM虚拟机底层原理</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
