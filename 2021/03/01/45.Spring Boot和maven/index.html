<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Spring Boot和maven, Jiang Space">
    <meta name="description" content="mysql介绍
数据库：存储和管理数据的仓库，数据是有组织的进行存储。数据库英文名是 DataBase，简称DB。
数据库就是将数据存储在硬盘上，可以达到持久化存储的效果。那又是如何解决上述问题的？使用数据库管理系统。
数据库管理系统：管理">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    

    <title>Spring Boot和maven | Jiang Space</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.2.0"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">Jiang Space</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">Jiang Space</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/12.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Spring Boot和maven</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/maven/">
                                <span class="chip bg-color">maven</span>
                            </a>
                        
                            <a href="/tags/Spring-Boot/">
                                <span class="chip bg-color">Spring Boot</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/Java/" class="post-category">
                                Java
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-03-01
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.min.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h2 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h2><h3 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h3><hr>
<p>数据库：存储和管理数据的仓库，数据是有组织的进行存储。数据库英文名是 DataBase，简称DB。</p>
<p>数据库就是将数据存储在硬盘上，可以达到持久化存储的效果。那又是如何解决上述问题的？使用数据库管理系统。</p>
<p>数据库管理系统：管理数据库的大型软件。DataBase Management System，简称 DBMS</p>
<p>我们平时说的MySQL数据库其实是MySQL数据库管理系统。</p>
<p>常见的数据库管理系统：</p>
<pre><code>Oracle：收费的大型数据库，Oracle 公司的产品
==MySQL==： 开源免费的中小型数据库。后来 Sun公司收购了 MySQL，而 Sun 公司又被 Oracle 收购
SQL Server：MicroSoft 公司收费的中型的数据库。C#、.net 等语言常使用
PostgreSQL：开源免费中小型的数据库
DB2：IBM 公司的大型收费数据库产品
SQLite：嵌入式的微型数据库。如：作为 Android 内置数据库
MariaDB：开源免费中小型的数据库
</code></pre>
<p>SQL：英文：Structured Query Language，简称 SQL，结构化查询语言。操作关系型数据库的编程语言。定义操作所有关系型数据库的统一标准，可以使用SQL操作所有的关系型数据库管理系统，以后工作中如果使用到了其他的数据库管理系统，也同样的使用SQL来操作。</p>
<hr>
<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><hr>
<p>下载：<a target="_blank" rel="noopener" href="https://downloads.mysql.com/archives/community/">https://downloads.mysql.com/archives/community/</a></p>
<p>配置环境变量</p>
<p>配置文件：</p>
<pre><code>[mysql]
# 设置mysql客户端默认字符集
default-character-set=utf8 
[mysqld]
# 设置mysql的安装目录
basedir = E:\mysql-5.7.27-winx64\mysql-5.7.27-winx64
# 设置mysql数据库的数据的存放目录
datadir = E:\mysql-5.7.27-winx64\mysql-5.7.27-winx64\data
# 允许最大连接数
max_connections=200
# 服务端使用的字符集默认为8比特编码的latin1字符集
character-set-server=utf8
# 创建新表时将使用的默认存储引擎
default-storage-engine=INNODB
# 如果需要的存储引擎被禁用或未编译，可以防止自动替换存储引擎
# 为事务存储引擎启用严格模式，也可能为非事务存储引擎启用严格模式
sql_mode=NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES
# 开启查询缓存
explicit_defaults_for_timestamp=true
</code></pre>
<p>以管理员方式运行,初始化MySQL:</p>
<pre><code>mysqld --initialize-insecure
</code></pre>
<p>注册MySQL服务:</p>
<pre><code>mysqld -install
</code></pre>
<p>启动MySQL服务:</p>
<pre><code>net start mysql
</code></pre>
<p>修改默认账户密码:</p>
<pre><code>mysqladmin -u root password ****
</code></pre>
<p>登陆:</p>
<pre><code>mysql -uroot -p****
</code></pre>
<p>登陆其他机器参数：</p>
<pre><code>mysql -u用户名 -p密码 -h要连接的mysql服务器的ip地址(默认127.0.0.1) -P端口号(默认3306)
</code></pre>
<p>退出mysql：</p>
<pre><code>exit
quit
</code></pre>
<hr>
<h3 id="MySQL数据模型"><a href="#MySQL数据模型" class="headerlink" title="MySQL数据模型"></a>MySQL数据模型</h3><hr>
<p>关系型数据库：关系型数据库是建立在关系模型基础上的数据库，简单说，关系型数据库是由多张能互相连接的二维表组成的数据库。</p>
<p>在MySQL中一个数据库对应到磁盘上的一个文件夹。<code>db.frm</code> 是表文件，<code>db.MYD</code> 是数据文件，通过这两个文件就可以查询到数据展示成二维表的效果。</p>
<p>MySQL中可以创建多个数据库，每个数据库对应到磁盘上的一个文件夹；在每个数据库中可以创建多个表，每张都对应到磁盘上一个 frm 文件；每张表可以存储多条数据，数据会被存储到磁盘中  MYD 文件中。</p>
<hr>
<h3 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h3><hr>
<p>通过SQL语句对数据库、表、数据进行增删改查操作。 英文：Structured Query Language，简称 SQL。结构化查询语言，一门操作关系型数据库的编程语言。</p>
<p>SQL语句可以单行或多行书写，以分号结尾。</p>
<p>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</p>
<p>注释</p>
<pre><code>单行注释: -- 注释内容 或 #注释内容(MySQL 特有) 

多行注释: /* 注释 */
</code></pre>
<p>SQL分类</p>
<pre><code>DDL(Data Definition Language) ： 数据定义语言，用来定义数据库对象：数据库，表，列等
DML(Data Manipulation Language) 数据操作语言，用来对数据库中表的数据进行增删改
DQL(Data Query Language) 数据查询语言，用来查询数据库中表的记录(数据)
DCL(Data Control Language) 数据控制语言，用来定义数据库的访问权限和安全级别，及创建用户
</code></pre>
<hr>
<h3 id="DDL操作数据库"><a href="#DDL操作数据库" class="headerlink" title="DDL操作数据库"></a>DDL操作数据库</h3><hr>
<p>查询所有的数据库:</p>
<pre><code>SHOW DATABASES;
</code></pre>
<p>创建数据库:</p>
<pre><code>CREATE DATABASE 数据库名称;
</code></pre>
<p>创建数据库(判断，如果不存在则创建):</p>
<pre><code>CREATE DATABASE IF NOT EXISTS 数据库名称;
</code></pre>
<p>删除数据库:</p>
<pre><code>DROP DATABASE 数据库名称;
</code></pre>
<p>删除数据库(判断，如果存在则删除):</p>
<pre><code>DROP DATABASE IF EXISTS 数据库名称;
</code></pre>
<p>使用数据库:</p>
<pre><code>USE 数据库名称;
</code></pre>
<p>查看当前使用的数据库:</p>
<pre><code>SELECT DATABASE();
</code></pre>
<hr>
<h3 id="DDL操作数据表"><a href="#DDL操作数据表" class="headerlink" title="DDL操作数据表"></a>DDL操作数据表</h3><hr>
<p>操作表也就是对表进行增（Create）删（Retrieve）改（Update）查（Delete）。</p>
<p>查询当前数据库下所有表名称:</p>
<pre><code>SHOW TABLES;
</code></pre>
<p>查询表结构：</p>
<pre><code>DESC 表名称;
</code></pre>
<p>创建表：</p>
<pre><code>CREATE TABLE 表名 (
    字段名1  数据类型1,
    字段名2  数据类型2,
    …
    字段名n  数据类型n
);
</code></pre>
<blockquote>
<p>注意：最后一行末尾，不能加逗号。</p>
</blockquote>
<p>数据类型-MySQL支持多种类型，可以分为三类：</p>
<pre><code>数值:
TINYINT	1 byte	小整数值
SMALLINT	2 bytes	大整数值
MEDIUMINT	3 bytes	大整数值
INT或INTEGER	4 bytes	大整数值
BIGINT	8 bytes	极大整数值
FLOAT	4 bytes	单精度浮点数值
DOUBLE	8 bytes	双精度浮点数值
DECIMAL		小数值

日期:
DATE	3	日期值
TIME	3	时间值或持续时间
YEAR	1	年份值
DATETIME	8	混合日期和时间值
TIMESTAMP	4	混合日期和时间值，时间戳

字符串:
CHAR	0-255 bytes	定长字符串
VARCHAR	0-65535 bytes	变长字符串
TINYBLOB	0-255 bytes	不超过 255 个字符的二进制字符串
TINYTEXT	0-255 bytes	短文本字符串
BLOB	0-65 535 bytes	二进制形式的长文本数据
TEXT	0-65 535 bytes	长文本数据
MEDIUMBLOB	0-16 777 215 bytes	二进制形式的中等长度文本数据
MEDIUMTEXT	0-16 777 215 bytes	中等长度文本数据
LONGBLOB	0-4 294 967 295 bytes	二进制形式的极大文本数据
LONGTEXT	0-4 294 967 295 bytes	极大文本数据
</code></pre>
<p>char： 定长字符串。优点：存储性能高；缺点：浪费空间；name char(10)  如果存储的数据字符个数不足10个，也会占10个的空间。</p>
<p>varchar： 变长字符串。优点：节约空间；缺点：存储性能底；name varchar(10) 如果存储的数据字符个数不足10个，那就数据字符个数是几就占几个的空间。</p>
<p>double的使用举例，设置分数，0-100，保留两位小数：</p>
<pre><code>score double(总长度, 小数点后保留的位数)
score double(5, 2)
</code></pre>
<p>删除表：</p>
<pre><code>DROP TABLE 表名;
</code></pre>
<p>删除表时判断表是否存在：</p>
<pre><code>DROP TABLE IF EXISTS 表名;
</code></pre>
<p>修改表名：</p>
<pre><code>ALTER TABLE 表名 RENAME TO 新的表名;

# 将表名student修改为stu
alter table student rename to stu;
</code></pre>
<p>添加一列：</p>
<pre><code>ALTER TABLE 表名 ADD 列名 数据类型;

# 给stu表添加一列address，该字段类型是varchar(50)
alter table stu add address varchar(50);
</code></pre>
<p>修改数据类型：</p>
<pre><code>ALTER TABLE 表名 MODIFY 列名 新数据类型;

# 将stu表中的address字段的类型改为 char(50)
alter table stu modify address char(50);
</code></pre>
<p>修改列名和数据类型：</p>
<pre><code>ALTER TABLE 表名 CHANGE 列名 新列名 新数据类型;

# 将stu表中的address字段名改为 addr，类型改为varchar(50)
alter table stu change address addr varchar(50);
</code></pre>
<p>删除列：</p>
<pre><code>ALTER TABLE 表名 DROP 列名;

# 将stu表中的addr字段 删除
alter table stu drop addr;
</code></pre>
<hr>
<h3 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h3><hr>
<p>DML主要是对数据进行增（insert）删（delete）改（update）操作。</p>
<p>给指定列添加数据：</p>
<pre><code>INSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…);
</code></pre>
<p>给全部列添加数据：</p>
<pre><code>INSERT INTO 表名 VALUES(值1,值2,…);
</code></pre>
<p>批量添加数据：</p>
<pre><code>INSERT INTO 表名(列名1,列名2,…) VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…;
INSERT INTO 表名 VALUES(值1,值2,…),(值1,值2,…),(值1,值2,…)…;
</code></pre>
<p>练习：</p>
<pre><code>-- 给指定列添加数据
INSERT INTO stu (id, NAME) VALUES (1, &#39;张三&#39;);
-- 给所有列添加数据，列名的列表可以省略的
INSERT INTO stu (id,NAME,sex,birthday,score,email,tel,STATUS) VALUES (2,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1);

INSERT INTO stu VALUES (2,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1);

-- 批量添加数据
INSERT INTO stu VALUES 
    (2,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1),
    (2,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1),
    (2,&#39;李四&#39;,&#39;男&#39;,&#39;1999-11-11&#39;,88.88,&#39;lisi@itcast.cn&#39;,&#39;13888888888&#39;,1);
</code></pre>
<p>修改表数据：</p>
<pre><code>UPDATE 表名 SET 列名1=值1,列名2=值2,… [WHERE 条件] ;
# 将张三的性别改为女
update stu set sex = &#39;女&#39; where name = &#39;张三&#39;;

# 将张三的生日改为 1999-12-12 分数改为99.99
update stu set birthday = &#39;1999-12-12&#39;, score = 99.99 where name = &#39;张三&#39;;
</code></pre>
<blockquote>
<p>注意：</p>
<ol>
<li>修改语句中如果不加条件，则将所有数据都修改！</li>
<li>像上面的语句中的中括号，表示在写sql语句中可以省略这部分</li>
</ol>
</blockquote>
<p>删除数据:</p>
<pre><code>DELETE FROM 表名 [WHERE 条件] ;

# 删除张三记录
delete from stu where name = &#39;张三&#39;;

# 删除stu表中所有的数据
delete from stu;
</code></pre>
<hr>
<h3 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h3><hr>
<p>查询的完整语法：</p>
<pre><code>SELECT 
    字段列表
FROM 
    表名列表 
WHERE 
    条件列表
GROUP BY
    分组字段
HAVING
    分组后条件
ORDER BY
    排序字段
LIMIT
    分页限定
</code></pre>
<p>查询多个字段：</p>
<pre><code>SELECT 字段列表 FROM 表名;
SELECT * FROM 表名; -- 查询所有数据
</code></pre>
<p>去除重复记录：</p>
<pre><code>SELECT DISTINCT 字段列表 FROM 表名;
</code></pre>
<p>起别名：</p>
<pre><code>AS: AS 也可以省略

select name,math 数学成绩,english 英文成绩 from stu;
</code></pre>
<p>条件查询:</p>
<pre><code># 查询年龄大于等于20岁 并且 年龄 小于等于 30岁 的学生信息
select * from stu where age &gt;= 20 &amp;&amp;  age &lt;= 30;
select * from stu where age &gt;= 20 and  age &lt;= 30;
select * from stu where age BETWEEN 20 and 30;

# 查询年龄不等于18岁的学生信息
select * from stu where age != 18;
select * from stu where age &lt;&gt; 18;

# 查询年龄等于18岁 或者 年龄等于20岁 或者 年龄等于22岁的学生信息
select * from stu where age = 18 or age = 20 or age = 22;
select * from stu where age in (18,20 ,22);

# 查询英语成绩为 null的学员信息
# null值的比较不能使用 =  或者 != 。需要使用 is  或者 is not
select * from stu where english is null;
select * from stu where english is not null;
</code></pre>
<p>模糊查询：</p>
<p>模糊查询使用like关键字，可以使用通配符进行占位:<code>_</code>: 代表单个任意字符; <code>%</code>: 代表任意个数字符。</p>
<pre><code># 查询姓&#39;马&#39;的学生信息
select * from stu where name like &#39;马%&#39;;

# 查询第二个字是&#39;花&#39;的学生信息  
select * from stu where name like &#39;_花%&#39;;

# 查询名字中包含 &#39;德&#39; 的学生信息
select * from stu where name like &#39;%德%&#39;;
</code></pre>
<p>排序查询：</p>
<pre><code>SELECT 字段列表 FROM 表名 ORDER BY 排序字段名1 [排序方式1],排序字段名2 [排序方式2] …;

排序方式有两种，分别是：ASC ： 升序排列 **（默认值）**，DESC ： 降序排列
注意：如果有多个排序条件，当前边的条件值一样时，才会根据第二条件进行排序

select * from stu order by age ;
select * from stu order by math desc ;
select * from stu order by math desc , english asc ;
</code></pre>
<p>聚合函数:将一列数据作为一个整体，进行纵向计算。</p>
<p>聚合函数分类:</p>
<table>
<thead>
<tr>
<th>函数名</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>count(列名)</td>
<td>统计数量（一般选用不为null的列）</td>
</tr>
<tr>
<td>max(列名)</td>
<td>最大值</td>
</tr>
<tr>
<td>min(列名)</td>
<td>最小值</td>
</tr>
<tr>
<td>sum(列名)</td>
<td>求和</td>
</tr>
<tr>
<td>avg(列名)</td>
<td>平均值</td>
</tr>
</tbody></table>
<p>聚合函数语法:</p>
<pre><code>SELECT 聚合函数名(列名) FROM 表;
# 注意：null 值不参与所有聚合函数运算

# 统计班级一共有多少个学生
select count(id) from stu;
select count(*) from stu;

# 查询数学成绩的最高分
select max(math) from stu;
</code></pre>
<p>分组查询:</p>
<pre><code>SELECT 字段列表 FROM 表名 [WHERE 分组前条件限定] GROUP BY 分组字段名 [HAVING 分组后条件过滤];
# 分组之后，查询的字段为聚合函数和分组字段，查询其他字段无任何意义

# 查询男同学和女同学各自的数学平均分
select sex, avg(math) from stu group by sex;

# 查询男同学和女同学各自的数学平均分，以及各自人数
select sex, avg(math),count(*) from stu group by sex;

# 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组
select sex, avg(math),count(*) from stu where math &gt; 70 group by sex;

# 查询男同学和女同学各自的数学平均分，以及各自人数，要求：分数低于70分的不参与分组，分组之后人数大于2个的
select sex, avg(math),count(*) from stu where math &gt; 70 group by sex having count(*)  &gt; 2;
</code></pre>
<p><strong>where 和 having 区别：</strong>执行时机不一样：where 是分组之前进行限定，不满足where条件，则不参与分组，而having是分组之后对结果进行过滤。可判断的条件不一样：where 不能对聚合函数进行判断，having 可以。</p>
<p>分页查询:</p>
<pre><code>SELECT 字段列表 FROM 表名 LIMIT  起始索引 , 查询条目数;
# 上述语句中的起始索引是从0开始

# 从0开始查询，查询3条数据
select * from stu limit 0 , 3;

# 每页显示3条数据，查询第1页数据
select * from stu limit 0 , 3;

# 每页显示3条数据，查询第2页数据
select * from stu limit 3 , 3;

# 公式：
起始索引 = (当前页码 - 1) * 每页显示的条数
</code></pre>
<hr>
<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><hr>
<p>约束是作用于表中列上的规则，用于限制加入表的数据。约束的存在保证了数据库中数据的正确性、有效性和完整性。</p>
<p>分类：</p>
<pre><code>非空约束： 关键字是 NOT NULL。保证列中所有的数据不能有null值。

唯一约束：关键字是  UNIQUE。保证列中所有数据各不相同。

主键约束： 关键字是  PRIMARY KEY。主键是一行数据的唯一标识，要求非空且唯一。一般我们都会给每张表添加一个主键列用来唯一标识数据。

检查约束： 关键字是  CHECK。 保证列中的值满足某一条件。MySQL不支持检查约束。

默认约束： 关键字是   DEFAULT。保存数据时，未指定值则采用默认值。

外键约束： 关键字是  FOREIGN KEY。外键用来让两个表的数据之间建立链接，保证数据的一致性和完整性。
</code></pre>
<p>非空约束:</p>
<pre><code>-- 创建表时添加非空约束
CREATE TABLE 表名(
   列名 数据类型 NOT NULL,
   …
); 

-- 建完表后添加非空约束
ALTER TABLE 表名 MODIFY 字段名 数据类型 NOT NULL;

-- 删除约束
ALTER TABLE 表名 MODIFY 字段名 数据类型;
</code></pre>
<p>唯一约束:</p>
<pre><code>-- 创建表时添加唯一约束
CREATE TABLE 表名(
   列名 数据类型 UNIQUE [AUTO_INCREMENT],
   -- AUTO_INCREMENT: 当不指定值时自动增长
   …
); 
CREATE TABLE 表名(
   列名 数据类型,
   …
   [CONSTRAINT] [约束名称] UNIQUE(列名)
); 

-- 建完表后添加唯一约束
ALTER TABLE 表名 MODIFY 字段名 数据类型 UNIQUE;

--删除约束
ALTER TABLE 表名 DROP INDEX 字段名;
</code></pre>
<p>主键约束:</p>
<pre><code>-- 创建表时添加主键约束
CREATE TABLE 表名(
   列名 数据类型 PRIMARY KEY [AUTO_INCREMENT],
   …
); 
CREATE TABLE 表名(
   列名 数据类型,
   [CONSTRAINT] [约束名称] PRIMARY KEY(列名)
); 

-- 建完表后添加主键约束
ALTER TABLE 表名 ADD PRIMARY KEY(字段名);

-- 删除约束
ALTER TABLE 表名 DROP PRIMARY KEY;
</code></pre>
<p>默认约束:</p>
<pre><code>-- 创建表时添加默认约束
CREATE TABLE 表名(
   列名 数据类型 DEFAULT 默认值,
   …
); 

-- 建完表后添加默认约束
ALTER TABLE 表名 ALTER 列名 SET DEFAULT 默认值;

-- 删除约束
ALTER TABLE 表名 ALTER 列名 DROP DEFAULT;
</code></pre>
<p>约束练习:</p>
<pre><code>CREATE TABLE emp (
  id INT PRIMARY KEY auto_increment, -- 员工id，主键且自增长
  ename VARCHAR(50) NOT NULL UNIQUE, -- 员工姓名，非空并且唯一
  joindate DATE NOT NULL , -- 入职日期，非空
  salary DOUBLE(7,2) NOT NULL , -- 工资，非空
  bonus DOUBLE(7,2) DEFAULT 0 -- 奖金，如果没有奖金默认为0
);
</code></pre>
<p><strong>默认约束只有在不给值时才会采用默认值。如果给了null，那值就是null值。</strong></p>
<p><strong>验证自动增长： auto_increment  当列是数字类型 并且唯一约束</strong></p>
<p>外键约束：</p>
<pre><code>-- 创建表时添加外键约束
CREATE TABLE 表名(
   列名 数据类型,
   …
   [CONSTRAINT] [外键名称] FOREIGN KEY(外键列名) REFERENCES 主表(主表列名) 
); 

-- 建完表后添加外键约束
ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称);

-- 删除外键约束
ALTER TABLE 表名 DROP FOREIGN KEY 外键名称;
</code></pre>
<p>员工表和部门表，并添加上外键约束：</p>
<pre><code>-- 部门表
CREATE TABLE dept(
    id int primary key auto_increment,
    dep_name varchar(20),
    addr varchar(20)
);
-- 员工表 
CREATE TABLE emp(
    id int primary key auto_increment,
    name varchar(20),
    age int,
    dep_id int,

    -- 添加外键 dep_id,关联 dept 表的id主键
    CONSTRAINT fk_emp_dept FOREIGN KEY(dep_id) REFERENCES dept(id)	
);

-- 删除外键
alter table emp drop FOREIGN key fk_emp_dept;

-- 重新添加外键
alter table emp add CONSTRAINT fk_emp_dept FOREIGN key(dep_id) REFERENCES dept(id);
</code></pre>
<hr>
<h3 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h3><hr>
<p>数据库设计：建立数据库中的表结构以及表与表之间的关联关系的过程。有哪些表？表里有哪些字段？表和表之间有什么关系？</p>
<p>表关系:一对一、一对多、多对多。</p>
<p>一对多的实现方式：在多的一方建立外键，指向一的一方的主键。</p>
<p>多对多的实现方式：建立第三张中间表，中间表至少包含两个外键，分别关联两方主键。</p>
<p>一对一的实现方式：在任意一方加入外键，关联另一方主键，并且设置外键为唯一(UNIQUE)。</p>
<hr>
<h3 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h3><hr>
<p>多表查询都有哪些呢:</p>
<pre><code>连接查询
    内连接查询 ：相当于查询AB交集数据
    外连接查询
        左外连接查询 ：相当于查询A表所有数据和交集部门数据
        右外连接查询 ： 相当于查询B表所有数据和交集部分数据
子查询
</code></pre>
<p>内连接查询：</p>
<pre><code>-- 隐式内连接
SELECT 字段列表 FROM 表1,表2… WHERE 条件;

-- 显示内连接
SELECT 字段列表 FROM 表1 [INNER] JOIN 表2 ON 条件;
</code></pre>
<p>隐式内连接：</p>
<pre><code>SELECT
    *
FROM
    emp,
    dept
WHERE
    emp.dep_id = dept.did;

执行上述语句结果如下：
</code></pre>
<p>查询 emp的 name， gender，dept表的dname:</p>
<pre><code>SELECT
    emp. NAME,
    emp.gender,
    dept.dname
FROM
    emp,
    dept
WHERE
    emp.dep_id = dept.did;
</code></pre>
<p>上面语句中使用表名指定字段所属有点麻烦，sql也支持给表指别名，上述语句可以改进为:</p>
<pre><code>SELECT
    t1. NAME,
    t1.gender,
    t2.dname
FROM
    emp t1,
    dept t2
WHERE
    t1.dep_id = t2.did; 
</code></pre>
<hr>
<p>显式内连接:</p>
<pre><code>select * from emp inner join dept on emp.dep_id = dept.did;
-- 上面语句中的inner可以省略，可以书写为如下语句
select * from emp  join dept on emp.dep_id = dept.did;
</code></pre>
<hr>
<p>外连接查询:</p>
<pre><code>-- 左外连接：相当于查询A表所有数据和交集部分数据
SELECT 字段列表 FROM 表1 LEFT [OUTER] JOIN 表2 ON 条件;

-- 右外连接：相当于查询B表所有数据和交集部分数据
SELECT 字段列表 FROM 表1 RIGHT [OUTER] JOIN 表2 ON 条件;
</code></pre>
<p>查询emp表所有数据和对应的部门信息（左外连接）:</p>
<pre><code>select * from emp left join dept on emp.dep_id = dept.did;
结果显示查询到了左表（emp）中所有的数据及两张表能关联的数据。
</code></pre>
<p>查询dept表所有数据和对应的员工信息（右外连接）:</p>
<pre><code>select * from emp right join dept on emp.dep_id = dept.did;
结果显示查询到了右表（dept）中所有的数据及两张表能关联的数据。
</code></pre>
<hr>
<p>子查询：查询中嵌套查询，称嵌套查询为子查询。</p>
<p>需求：查询工资高于猪八戒的员工信息。来实现这个需求，我们就可以通过二步实现，</p>
<pre><code>第一步：先查询出来 猪八戒的工资
select salary from emp where name = &#39;猪八戒&#39;

第二步：查询工资高于猪八戒的员工信息
select * from emp where salary &gt; 3600;
</code></pre>
<p>查询语句中嵌套查询语句：</p>
<pre><code>select * from emp where salary &gt; (select salary from emp where name = &#39;猪八戒&#39;);
</code></pre>
<p>子查询根据查询结果不同，作用不同：</p>
<pre><code>子查询语句结果是单行单列，子查询语句作为条件值，使用 =  !=  &gt;  &lt;  等进行条件判断
子查询语句结果是多行单列，子查询语句作为条件值，使用 in 等关键字进行条件判断
子查询语句结果是多行多列，子查询语句作为虚拟表
</code></pre>
<p>查询 ‘财务部’ 和 ‘市场部’ 所有的员工信息：</p>
<pre><code>-- 查询 &#39;财务部&#39; 或者 &#39;市场部&#39; 所有的员工的部门did
select did from dept where dname = &#39;财务部&#39; or dname = &#39;市场部&#39;;
select * from emp where dep_id in (select did from dept where dname = &#39;财务部&#39; or dname = &#39;市场部&#39;);
</code></pre>
<p>查询入职日期是 ‘2011-11-11’ 之后的员工信息和部门信息：</p>
<pre><code>-- 查询入职日期是 &#39;2011-11-11&#39; 之后的员工信息
select * from emp where join_date &gt; &#39;2011-11-11&#39; ;
-- 将上面语句的结果作为虚拟表和dept表进行内连接查询
select * from (select * from emp where join_date &gt; &#39;2011-11-11&#39; ) t1, dept where t1.dep_id = dept.did;
</code></pre>
<hr>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><hr>
<p>事务把所有的命令作为一个整体一起向系统提交或撤销操作请求，即这一组数据库命令要么同时成功，要么同时失败。事务是一个不可分割的工作逻辑单元。</p>
<p>语法:</p>
<pre><code># 开启事务
START TRANSACTION;
或者  
BEGIN;

# 提交事务
commit;

# 回滚事务
rollback;
</code></pre>
<p>事务的四大特征：</p>
<pre><code>原子性（Atomicity）: 事务是不可分割的最小操作单位，要么同时成功，要么同时失败

一致性（Consistency） :事务完成时，必须使所有的数据都保持一致状态

隔离性（Isolation） :多个事务之间，操作的可见性

持久性（Durability） :事务一旦提交或回滚，它对数据库中的数据的改变就是永久的
</code></pre>
<p>mysql中事务是自动提交的。也就是说我们不添加事务执行sql语句，语句执行完毕会自动的提交事务。</p>
<p>可以通过下面语句查询默认提交方式：</p>
<pre><code>SELECT @@autocommit;
</code></pre>
<p>查询到的结果是1 则表示自动提交，结果是0表示手动提交。当然也可以通过下面语句修改提交方式</p>
<pre><code>set @@autocommit = 0;
</code></pre>
<hr>
<h2 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h2><h3 id="JDBC概念"><a href="#JDBC概念" class="headerlink" title="JDBC概念"></a>JDBC概念</h3><hr>
<p>JDBC就是使用Java语言操作关系型数据库的一套API。全称：( Java DataBase Connectivity ) Java 数据库连接。</p>
<p>JDBC好处：各数据库厂商使用相同的接口，Java代码不需要针对不同数据库分别开发；可随时替换底层数据库，访问数据库的Java代码基本不变。</p>
<hr>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><hr>
<pre><code>//1. 注册驱动
Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
//2. 获取连接
String url = &quot;jdbc:mysql://127.0.0.1:3306/db1&quot;;
String username = &quot;root&quot;;
String password = &quot;1234&quot;;
Connection conn = DriverManager.getConnection(url, username, password);
//3. 定义sql
String sql = &quot;update account set money = 2000 where id = 1&quot;;
//4. 获取执行sql的对象 Statement
Statement stmt = conn.createStatement();
//5. 执行sql
int count = stmt.executeUpdate(sql);//受影响的行数
//6. 处理结果
System.out.println(count);
//7. 释放资源
stmt.close();
conn.close();
</code></pre>
<hr>
<h3 id="API详解"><a href="#API详解" class="headerlink" title="API详解"></a>API详解</h3><hr>
<p>DriverManager（驱动管理类）作用：注册驱动 <code>registerDriver</code> ；获取数据库连接 <code>getConnection</code> 。</p>
<p>Connection（数据库连接对象）作用：获取执行 SQL 的对象；管理事务。</p>
<p>Connection管理事务：</p>
<pre><code>/**
 * JDBC API 详解：Connection
 */
public class JDBCDemo3_Connection &#123;

    public static void main(String[] args) throws Exception &#123;
        //1. 注册驱动
        //Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
        //2. 获取连接：如果连接的是本机mysql并且端口是默认的 3306 可以简化书写
        String url = &quot;jdbc:mysql:///db1?useSSL=false&quot;;
        String username = &quot;root&quot;;
        String password = &quot;1234&quot;;
        Connection conn = DriverManager.getConnection(url, username, password);
        //3. 定义sql
        String sql1 = &quot;update account set money = 3000 where id = 1&quot;;
        String sql2 = &quot;update account set money = 3000 where id = 2&quot;;
        //4. 获取执行sql的对象 Statement
        Statement stmt = conn.createStatement();
        try &#123;
            // ============开启事务==========
            // autoCommit 表示是否自动提交事务，true表示自动提交事务，false表示手动提交事务。
            conn.setAutoCommit(false);
            //5. 执行sql
            int count1 = stmt.executeUpdate(sql1);//受影响的行数
            //6. 处理结果
            System.out.println(count1);
            int i = 3/0;
            //5. 执行sql
            int count2 = stmt.executeUpdate(sql2);//受影响的行数
            //6. 处理结果
            System.out.println(count2);
            // ============提交事务==========
            //程序运行到此处，说明没有出现任何问题，则需求提交事务
            conn.commit();
        &#125; catch (Exception e) &#123;
            // ============回滚事务==========
            //程序在出现异常时会执行到这个地方，此时就需要回滚事务
            conn.rollback();
            e.printStackTrace();
        &#125;
        //7. 释放资源
        stmt.close();
        conn.close();
    &#125;
&#125;
</code></pre>
<p>Statement对象的作用就是用来执行SQL语句。</p>
<p>执行DML语句:</p>
<pre><code>/**
* 执行DML语句
* @throws Exception
*/
@Test
public void testDML() throws  Exception &#123;
  //1. 注册驱动
  //Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
  //2. 获取连接：如果连接的是本机mysql并且端口是默认的 3306 可以简化书写
  String url = &quot;jdbc:mysql:///db1?useSSL=false&quot;;
  String username = &quot;root&quot;;
  String password = &quot;1234&quot;;
  Connection conn = DriverManager.getConnection(url, username, password);
  //3. 定义sql
  String sql = &quot;update account set money = 3000 where id = 1&quot;;
  //4. 获取执行sql的对象 Statement
  Statement stmt = conn.createStatement();
  //5. 执行sql
  int count = stmt.executeUpdate(sql);//执行完DML语句，受影响的行数
  //6. 处理结果
  //System.out.println(count);
  if(count &gt; 0)&#123;
      System.out.println(&quot;修改成功~&quot;);
  &#125;else&#123;
      System.out.println(&quot;修改失败~&quot;);
  &#125;
  //7. 释放资源
  stmt.close();
  conn.close();
&#125;
</code></pre>
<p>执行DDL语句(<strong>执行完DDL语句，可能是0</strong>):</p>
<pre><code>/**
* 执行DDL语句
* @throws Exception
*/
@Test
public void testDDL() throws  Exception &#123;
  //1. 注册驱动
  //Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
  //2. 获取连接：如果连接的是本机mysql并且端口是默认的 3306 可以简化书写
  String url = &quot;jdbc:mysql:///db1?useSSL=false&quot;;
  String username = &quot;root&quot;;
  String password = &quot;1234&quot;;
  Connection conn = DriverManager.getConnection(url, username, password);
  //3. 定义sql
  String sql = &quot;drop database db2&quot;;
  //4. 获取执行sql的对象 Statement
  Statement stmt = conn.createStatement();
  //5. 执行sql
  int count = stmt.executeUpdate(sql);//执行完DDL语句，可能是0
  //6. 处理结果
  System.out.println(count);

  //7. 释放资源
  stmt.close();
  conn.close();
&#125;
</code></pre>
<p>ResultSet（结果集对象）作用：封装了SQL查询语句的结果。我们就需要从 <code>ResultSet</code> 对象中获取我们想要的数据。<code>ResultSet</code> 对象提供了操作查询结果数据的方法，如下：</p>
<pre><code>boolean  next():将光标从当前位置向前移动一行;判断当前行是否为有效行

xxx  getXxx(参数)：获取数据
xxx : 数据类型；如： int getInt(参数) ；String getString(参数)
参数:int类型的参数：列的编号，从1开始; String类型的参数： 列的名称 
</code></pre>
<p>执行DQL:</p>
<pre><code>/**
  * 执行DQL
  * @throws Exception
  */
@Test
public void testResultSet() throws  Exception &#123;
    //1. 注册驱动
    //Class.forName(&quot;com.mysql.jdbc.Driver&quot;);
    //2. 获取连接：如果连接的是本机mysql并且端口是默认的 3306 可以简化书写
    String url = &quot;jdbc:mysql:///db1?useSSL=false&quot;;
    String username = &quot;root&quot;;
    String password = &quot;1234&quot;;
    Connection conn = DriverManager.getConnection(url, username, password);
    //3. 定义sql
    String sql = &quot;select * from account&quot;;
    //4. 获取statement对象
    Statement stmt = conn.createStatement();
    //5. 执行sql
    ResultSet rs = stmt.executeQuery(sql);
    //6. 处理结果， 遍历rs中的所有数据
    /* // 6.1 光标向下移动一行，并且判断当前行是否有数据
        while (rs.next())&#123;
            //6.2 获取数据  getXxx()
            int id = rs.getInt(1);
            String name = rs.getString(2);
            double money = rs.getDouble(3);

            System.out.println(id);
            System.out.println(name);
            System.out.println(money);
            System.out.println(&quot;--------------&quot;);

        &#125;*/
    // 6.1 光标向下移动一行，并且判断当前行是否有数据
    while (rs.next())&#123;
        //6.2 获取数据  getXxx()
        int id = rs.getInt(&quot;id&quot;);
        String name = rs.getString(&quot;name&quot;);
        double money = rs.getDouble(&quot;money&quot;);

        System.out.println(id);
        System.out.println(name);
        System.out.println(money);
        System.out.println(&quot;--------------&quot;);
    &#125;

    //7. 释放资源
    rs.close();
    stmt.close();
    conn.close();
&#125;
</code></pre>
<hr>
<h3 id="PreparedStatement"><a href="#PreparedStatement" class="headerlink" title="PreparedStatement"></a>PreparedStatement</h3><hr>
<p>代码模拟SQL注入问题:</p>
<pre><code>@Test
public void testLogin() throws  Exception &#123;
    //2. 获取连接：如果连接的是本机mysql并且端口是默认的 3306 可以简化书写
    String url = &quot;jdbc:mysql:///db1?useSSL=false&quot;;
    String username = &quot;root&quot;;
    String password = &quot;1234&quot;;
    Connection conn = DriverManager.getConnection(url, username, password);

    // 接收用户输入 用户名和密码
    String name = &quot;sjdljfld&quot;;
    String pwd = &quot;&#39; or &#39;1&#39; = &#39;1&quot;;
    String sql = &quot;select * from tb_user where username = &#39;&quot;+name+&quot;&#39; and password = &#39;&quot;+pwd+&quot;&#39;&quot;;
    // 获取stmt对象
    Statement stmt = conn.createStatement();
    // 执行sql
    ResultSet rs = stmt.executeQuery(sql);
    // 判断登录是否成功
    if(rs.next())&#123;
        System.out.println(&quot;登录成功~&quot;);
    &#125;else&#123;
        System.out.println(&quot;登录失败~&quot;);
    &#125;

    //7. 释放资源
    rs.close();
    stmt.close();
    conn.close();
&#125;
</code></pre>
<p>上面代码是将用户名和密码拼接到sql语句中，拼接后的sql语句如下</p>
<pre><code>select * from tb_user where username = &#39;sjdljfld&#39; and password = &#39;&#39;or &#39;1&#39; = &#39;1&#39;
</code></pre>
<p>从上面语句可以看出条件 <code>username = &#39;sjdljfld&#39; and password = &#39;&#39;</code> 不管是否满足，而 <code>or</code> 后面的 <code>&#39;1&#39; = &#39;1&#39;</code> 是始终满足的，最终条件是成立的，就可以正常的进行登陆了。</p>
<p>接下来我们来学习PreparedStatement对象.</p>
<p>PreparedStatement作用：预编译SQL语句并执行：预防SQL注入问题</p>
<p>获取 PreparedStatement 对象:</p>
<pre><code>// SQL语句中的参数值，使用？占位符替代
String sql = &quot;select * from user where username = ? and password = ?&quot;;
// 通过Connection对象获取，并传入对应的sql语句
PreparedStatement pstmt = conn.prepareStatement(sql);
</code></pre>
<p>上面的sql语句中参数使用 ? 进行占位，在之前之前肯定要设置这些 ?  的值。</p>
<pre><code>PreparedStatement对象：setXxx(参数1，参数2)：给 ? 赋值
Xxx：数据类型 ； 如 setInt (参数1，参数2)
参数：
参数1： ？的位置编号，从1 开始
参数2： ？的值
</code></pre>
<p>执行SQL语句:</p>
<pre><code>executeUpdate();  执行DDL语句和DML语句
executeQuery();  执行DQL语句
注意：调用这两个方法时不需要传递SQL语句，因为获取SQL语句执行对象时已经对SQL语句进行预编译了。
</code></pre>
<p>使用PreparedStatement改进:</p>
<pre><code>@Test
public void testPreparedStatement() throws  Exception &#123;
    //2. 获取连接：如果连接的是本机mysql并且端口是默认的 3306 可以简化书写
    String url = &quot;jdbc:mysql:///db1?useSSL=false&quot;;
    String username = &quot;root&quot;;
    String password = &quot;1234&quot;;
    Connection conn = DriverManager.getConnection(url, username, password);

    // 接收用户输入 用户名和密码
    String name = &quot;zhangsan&quot;;
    String pwd = &quot;&#39; or &#39;1&#39; = &#39;1&quot;;

    // 定义sql
    String sql = &quot;select * from tb_user where username = ? and password = ?&quot;;
    // 获取pstmt对象
    PreparedStatement pstmt = conn.prepareStatement(sql);
    // 设置？的值
    pstmt.setString(1,name);
    pstmt.setString(2,pwd);
    // 执行sql
    ResultSet rs = pstmt.executeQuery();
    // 判断登录是否成功
    if(rs.next())&#123;
        System.out.println(&quot;登录成功~&quot;);
    &#125;else&#123;
        System.out.println(&quot;登录失败~&quot;);
    &#125;
    //7. 释放资源
    rs.close();
    pstmt.close();
    conn.close();
&#125;
</code></pre>
<p>执行上面语句就可以发现不会出现SQL注入漏洞问题了。那么PreparedStatement又是如何解决的呢？它是将特殊字符进行了转义，转义的SQL如下：</p>
<pre><code>select * from tb_user where username = &#39;sjdljfld&#39; and password = &#39;\&#39;or \&#39;1\&#39; = \&#39;1&#39;
</code></pre>
<p>PreparedStatement 好处：预编译SQL，性能更高;防止SQL注入：&#x3D;&#x3D;将敏感字符进行转义&#x3D;&#x3D;.</p>
<p>Java代码操作数据库流程：将sql语句发送到MySQL服务器端;MySQL服务端会对sql语句进行如下操作:检查SQL语句的语法是否正确,将SQL语句编译成可执行的函数,执行SQL语句.</p>
<p>PreparedStatement原理:在获取PreparedStatement对象时，将sql语句发送给mysql服务器进行检查，编译（这些步骤很耗时）;执行时就不用再进行这些步骤了，速度更快;如果sql模板一样，则只需要进行一次检查、编译。</p>
<hr>
<h3 id="数据库连接池"><a href="#数据库连接池" class="headerlink" title="数据库连接池"></a>数据库连接池</h3><hr>
<p>数据库连接池是个容器，负责分配、管理数据库连接(Connection)。它允许应用程序重复使用一个现有的数据库连接，而不是再重新建立一个；释放空闲时间超过最大空闲时间的数据库连接来避免因为没有释放数据库连接而引起的数据库连接遗漏。</p>
<p>好处：资源重用，提升系统响应速度，避免数据库连接遗漏。</p>
<p>之前我们代码中使用连接是没有使用都创建一个Connection对象，使用完毕就会将其销毁。这样重复创建销毁的过程是特别耗费计算机的性能的及消耗时间的。而数据库使用了数据库连接池后，就能达到Connection对象的复用。</p>
<p>连接池是在一开始就创建好了一些连接（Connection）对象存储起来。用户需要连接数据库时，不需要自己创建连接，而只需要从连接池中获取一个连接进行使用，使用完毕后再将连接对象归还给连接池；这样就可以起到资源重用，也节省了频繁创建连接销毁连接所花费的时间，从而提升了系统响应的速度。</p>
<p>数据库连接池实现：以后就不需要通过 <code>DriverManager</code> 对象获取 <code>Connection</code> 对象，而是通过连接池（DataSource）获取 <code>Connection</code> 对象。</p>
<p>常见的数据库连接池：DBCP、C3P0、Druid。</p>
<p>Druid（德鲁伊）：Druid连接池是阿里巴巴开源的数据库连接池项目。功能强大，性能优秀，是Java语言最好的数据库连接池之一。</p>
<p>Driud使用</p>
<pre><code>导入jar包 druid-1.1.12.jar

定义配置文件
    driverClassName=com.mysql.jdbc.Driver
    url=jdbc:mysql:///db1?useSSL=false&amp;useServerPrepStmts=true
    username=root
    password=1234
    # 初始化连接数量
    initialSize=5
    # 最大连接数
    maxActive=10
    # 最大等待时间
    maxWait=3000

加载配置文件
获取数据库连接池对象
获取连接
</code></pre>
<p>使用druid的代码如下：</p>
<pre><code>/**
 * Druid数据库连接池演示
 */
public class DruidDemo &#123;

    public static void main(String[] args) throws Exception &#123;
        //1.导入jar包
        //2.定义配置文件
        //3. 加载配置文件
        Properties prop = new Properties();
        prop.load(new FileInputStream(&quot;jdbc-demo/src/druid.properties&quot;));
        //4. 获取连接池对象
        DataSource dataSource = DruidDataSourceFactory.createDataSource(prop);

        //5. 获取数据库连接 Connection
        Connection connection = dataSource.getConnection();
        System.out.println(connection); //获取到了连接后就可以继续做其他操作了

        //System.out.println(System.getProperty(&quot;user.dir&quot;));
    &#125;
&#125;
</code></pre>
<p>druid配置详解:</p>
<table>
<thead>
<tr>
<th align="center">属性</th>
<th align="center">说明</th>
<th align="center">建议值</th>
</tr>
</thead>
<tbody><tr>
<td align="center">url</td>
<td align="center">数据库的jdbc连接地址。一般为连接oracle&#x2F;mysql。示例如下：</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">mysql : jdbc:mysql:&#x2F;&#x2F;ip:port&#x2F;dbname?option1&amp;option2&amp;…</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">oracle : jdbc:oracle:thin:@ip:port:oracle_sid</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
<tr>
<td align="center">username</td>
<td align="center">登录数据库的用户名</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">password</td>
<td align="center">登录数据库的用户密码</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">initialSize</td>
<td align="center">启动程序时，在连接池中初始化多少个连接</td>
<td align="center">10-50已足够</td>
</tr>
<tr>
<td align="center">maxActive</td>
<td align="center">连接池中最多支持多少个活动会话</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">maxWait</td>
<td align="center">程序向连接池中请求连接时,超过maxWait的值后，认为本次请求失败，即连接池</td>
<td align="center">100</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">没有可用连接，单位毫秒，设置-1时表示无限等待</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">minEvictableIdleTimeMillis</td>
<td align="center">池中某个连接的空闲时长达到 N 毫秒后, 连接池在下次检查空闲连接时，将</td>
<td align="center">见说明部分</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">回收该连接,要小于防火墙超时设置</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">net.netfilter.nf_conntrack_tcp_timeout_established的设置</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">timeBetweenEvictionRunsMillis</td>
<td align="center">检查空闲连接的频率，单位毫秒, 非正整数时表示不进行检查</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">keepAlive</td>
<td align="center">程序没有close连接且空闲时长超过 minEvictableIdleTimeMillis,则会执</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">行validationQuery指定的SQL,以保证该程序连接不会池kill掉,其范围不超</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">过minIdle指定的连接个数。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">minIdle</td>
<td align="center">回收空闲连接时，将保证至少有minIdle个连接.</td>
<td align="center">与initialSize相同</td>
</tr>
<tr>
<td align="center">removeAbandoned</td>
<td align="center">要求程序从池中get到连接后, N 秒后必须close,否则druid 会强制回收该</td>
<td align="center">false,当发现程序有未</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">连接,不管该连接中是活动还是空闲, 以防止进程不会进行close而霸占连接。</td>
<td align="center">正常close连接时设置为true</td>
</tr>
<tr>
<td align="center">removeAbandonedTimeout</td>
<td align="center">设置druid 强制回收连接的时限，当程序从池中get到连接开始算起，超过此</td>
<td align="center">应大于业务运行最长时间</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">值后，druid将强制回收该连接，单位秒。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">logAbandoned</td>
<td align="center">当druid强制回收连接后，是否将stack trace 记录到日志中</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">testWhileIdle</td>
<td align="center">当程序请求连接，池在分配连接时，是否先检查该连接是否有效。(高效)</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center">validationQuery</td>
<td align="center">检查池中的连接是否仍可用的 SQL 语句,drui会连接到数据库执行该SQL, 如果</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">正常返回，则表示连接可用，否则表示连接不可用</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">testOnBorrow</td>
<td align="center">程序 <strong>申请</strong> 连接时,进行连接有效性检查（低效，影响性能）</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center">testOnReturn</td>
<td align="center">程序 <strong>返还</strong> 连接时,进行连接有效性检查（低效，影响性能）</td>
<td align="center">false</td>
</tr>
<tr>
<td align="center">poolPreparedStatements</td>
<td align="center">缓存通过以下两个方法发起的SQL:</td>
<td align="center">true</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">public PreparedStatement prepareStatement(String sql)</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">public PreparedStatement prepareStatement(String sql,</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">int resultSetType, int resultSetConcurrency)</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">maxPoolPrepareStatementPerConnectionSize</td>
<td align="center">每个连接最多缓存多少个SQL</td>
<td align="center">20</td>
</tr>
<tr>
<td align="center">filters</td>
<td align="center">这里配置的是插件,常用的插件有:</td>
<td align="center">stat,wall,slf4j</td>
</tr>
<tr>
<td align="center"></td>
<td align="center">监控统计: filter:stat</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">日志监控: filter:log4j 或者 slf4j</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">防御SQL注入: filter:wall</td>
<td align="center"></td>
</tr>
<tr>
<td align="center">connectProperties</td>
<td align="center">连接属性。比如设置一些连接池统计方面的配置。</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">druid.stat.mergeSql&#x3D;true;druid.stat.slowSqlMillis&#x3D;5000</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center">比如设置一些数据库连接属性:</td>
<td align="center"></td>
</tr>
<tr>
<td align="center"></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>
<hr>
<h2 id="Spring-Boot"><a href="#Spring-Boot" class="headerlink" title="Spring Boot"></a>Spring Boot</h2><h3 id="介绍-1"><a href="#介绍-1" class="headerlink" title="介绍"></a>介绍</h3><hr>
<p>Spring Boot是便捷搭建基于Spring的工程脚手架。其最主要作用就是帮助开发人员快速的构建庞大的spring项目，并且尽可能的减少一切xml配置，做到开箱即用，迅速上手，让开发人员关注业务而非配置。</p>
<p>我们可以使用Spring Boot创建java应用，并使用<code>java –jar</code> 启动它，就能得到一个生产级别的web工程。</p>
<hr>
<h3 id="快速搭建"><a href="#快速搭建" class="headerlink" title="快速搭建"></a>快速搭建</h3><hr>
<p><code>Spring Initializr</code>（jdk1.8默认即可）–&gt; 完善项目信息 –&gt; <code>spring web starter</code></p>
<p>pom.xml文件：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.5.1&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;groupId&gt;com.example&lt;/groupId&gt;
    &lt;artifactId&gt;HelloSpringBoot&lt;/artifactId&gt;
    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;HelloSpringBoot&lt;/name&gt;
    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;
    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>Application文件：</p>
<pre><code>@SpringBootApplication
public class HelloSpringBootApplication &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(HelloSpringBootApplication.class, args);
    &#125;
&#125;
</code></pre>
<p>Controller文件：</p>
<pre><code>import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController &#123;
    @GetMapping(value=&quot;/hello&quot;)
    public String hello()&#123;
        return &quot;Hello Spring Boot&quot;;
    &#125;
&#125;
</code></pre>
<p>访问<code>http://localhost:8080/hello</code>即可以返回<code>Hello Spring Boot</code>。</p>
<hr>
<h3 id="Druid"><a href="#Druid" class="headerlink" title="Druid"></a>Druid</h3><hr>
<p>引入：</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;druid&lt;/artifactId&gt;
    &lt;version&gt;1.1.16&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>写法一：</p>
<p>创建数据库 <code>springboot_test</code> ，在项目resources下新建 <code>jdbc.properties</code> 文件：</p>
<pre><code>jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://192.168.1.13:3306/springboot_test
jdbc.username=root
jdbc.password=123456
</code></pre>
<p><code>JdbcConfig</code> 类:</p>
<pre><code>import com.alibaba.druid.pool.DruidDataSource;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.PropertySource;
import javax.sql.DataSource;

@Configuration
@PropertySource(&quot;classpath:jdbc.properties&quot;)
public class JdbcConfig &#123;
    @Value(&quot;$&#123;jdbc.url&#125;&quot;)
    String url;
    @Value(&quot;$&#123;jdbc.driverClassName&#125;&quot;)
    String driverClassName;
    @Value(&quot;$&#123;jdbc.username&#125;&quot;)
    String username;
    @Value(&quot;$&#123;jdbc.password&#125;&quot;)
    String password;

    @Bean
    public DataSource dataSource() &#123;
        DruidDataSource dataSource = new DruidDataSource();
        dataSource.setDriverClassName(driverClassName);
        dataSource.setUrl(url);
        dataSource.setUsername(username);
        dataSource.setPassword(password);
        return dataSource;
    &#125;
&#125;
</code></pre>
<p>写法二：<code>@ConfigurationProperties</code>可以在类上，也可以在方法上：</p>
<p>在项目resources下 <code>application.properties</code>：</p>
<pre><code>jdbc.driverClassName=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://192.168.1.13:3306/springboot_test
jdbc.username=root
jdbc.password=123456
</code></pre>
<p><code>JdbcConfig</code> 类:</p>
<pre><code>import com.alibaba.druid.pool.DruidDataSource;
import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import javax.sql.DataSource;

@Configuration
public class JdbcConfig &#123;

    //prefix = &quot;jdbc&quot; 中的jdbc指的是 jdbc.password=123456 中的jdbc
    @Bean
    @ConfigurationProperties(prefix = &quot;jdbc&quot;)
    public DataSource dataSource() &#123;
        return new DruidDataSource();
    &#125;
&#125;
</code></pre>
<p>两种写法写完后，使用：</p>
<pre><code>@Autowired
private DataSource dataSource;

System.out.println(&quot;dataSource: &quot; + dataSource);
</code></pre>
<hr>
<h3 id="yml文件配置"><a href="#yml文件配置" class="headerlink" title="yml文件配置"></a>yml文件配置</h3><hr>
<p>yaml与properties配置文件除了展示形式不相同以外，其它功能和作用都是一样的；在项目中原路的读取方式不需要改变。</p>
<p>yml配置文件的特征：树状层级结构展示配置项；配置项之间如果有关系的话需要分行空两格；配置项如果有值的话，那么需要在 <code>:</code>之后空一格再写配置项值；</p>
<pre><code>jdbc:
  driverClassName: com.mysql.jdbc.Driver
  url: jdbc:mysql://127.0.0.1:3306/hehe
  username: root
  password: 123456

key:
  abc: cba
  def:
    - g
    - h
    - j
</code></pre>
<p>多个yml配置文件，在spring boot中是被允许的。这些配置文件的名称必须为 <code>application-***.yml</code>，并且这些配置文件必须要在<code>application.yml</code>配置文件中激活之后才可以使用。</p>
<pre><code>#激活配置文件;需要指定其它的配置文件名称,abc,def就是application-abc.yml，application-def.yml
spring:
  profiles:
    active: abc,def
</code></pre>
<p>如果properties和yml配置文件同时存在在<code>spring boot</code>项目中；那么这两类配置文件都有效。在两个配置文件中如果存在同名的配置项的话会以properties文件的为主。</p>
<hr>
<h3 id="lombok应用"><a href="#lombok应用" class="headerlink" title="lombok应用"></a>lombok应用</h3><hr>
<p>添加lombok对应的依赖到项目pom.xml文件:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
    &lt;artifactId&gt;lombok&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>在Bean上使用：</p>
<pre><code>@Data ：自动提供getter和setter、hashCode、equals、toString等方法
@Getter：自动提供getter方法
@Setter：自动提供setter方法
@Slf4j：自动在bean中提供log变量，其实用的是slf4j的日志功能。
</code></pre>
<hr>
<h3 id="修改项目tomcat端口"><a href="#修改项目tomcat端口" class="headerlink" title="修改项目tomcat端口"></a>修改项目tomcat端口</h3><hr>
<p>yml文件方式</p>
<pre><code>#tomcat端口
server:
  port: 80
</code></pre>
<p><code>application.properties</code>中修改端口和path：</p>
<pre><code>server.port=8082
server.servlet.context-path=/shiyanlou/
</code></pre>
<hr>
<h3 id="静态资源"><a href="#静态资源" class="headerlink" title="静态资源"></a>静态资源</h3><hr>
<p>默认的静态资源路径为：</p>
<pre><code>classpath:/META-INF/resources/
classpath:/resources/
classpath:/static/
classpath:/public
</code></pre>
<hr>
<h3 id="SpringMVC拦截器"><a href="#SpringMVC拦截器" class="headerlink" title="SpringMVC拦截器"></a>SpringMVC拦截器</h3><hr>
<p>编写拦截器（实现<code>HandlerInterceptor</code>）:</p>
<pre><code>import lombok.extern.slf4j.Slf4j;
import org.springframework.web.servlet.HandlerInterceptor;
import org.springframework.web.servlet.ModelAndView;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@Slf4j
public class MyInterceptor implements HandlerInterceptor &#123;
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception &#123;
        log.debug(&quot;这是MyInterceptor的preHandle方法。&quot;);
        return true;
    &#125;

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception &#123;
        log.debug(&quot;这是MyInterceptor的postHandle方法。&quot;);
    &#125;

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception &#123;
        log.debug(&quot;这是MyInterceptor的afterCompletion方法。&quot;);
    &#125;
&#125;
</code></pre>
<p>编写配置类实现 <code>WebMvcConfigurer</code>，在该类中添加各种组件:</p>
<pre><code>import com.jiangtea.interceptor.MyInterceptor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class MvcConfig implements WebMvcConfigurer &#123;

    //注册拦截器
    @Bean
    public MyInterceptor myInterceptor()&#123;
        return new MyInterceptor();
    &#125;

    //添加拦截器到spring mvc拦截器链
    @Override
    public void addInterceptors(InterceptorRegistry registry) &#123;
        registry.addInterceptor(myInterceptor()).addPathPatterns(&quot;/*&quot;);
    &#125;
&#125;
</code></pre>
<p>设置日志级别：</p>
<pre><code>#日志记录级别
logging:
  level:
    com.jiangtea: debug
    org.springframework: info
</code></pre>
<hr>
<h3 id="整合事务和连接池"><a href="#整合事务和连接池" class="headerlink" title="整合事务和连接池"></a>整合事务和连接池</h3><hr>
<p>配置Spring Boot自带默认的 <code>hikari</code>数据库连接池和使用 <code>@Transactional</code>注解进行事务配置。</p>
<p>pom.xml文件中：</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>application.properties：</p>
<pre><code>spring.datasource.driverClassName=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://localhost:3306/springboot_test?useUnicode=true&amp;characterEncoding=utf8&amp;autoReconnect=true&amp;useSSL=false
spring.datasource.username=root
spring.datasource.password=123456
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.maximum-pool-size=15
spring.datasource.hikari.auto-commit=true
spring.datasource.hikari.idle-timeout=30000
spring.datasource.hikari.pool-name=hikariCP
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.connection-test-query=SELECT 1
</code></pre>
<p>UserService类：</p>
<pre><code>import com.jiangtea.pojo.User;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
public class UserService &#123;
    //根据id查询
    public User queryById(Long id)&#123;
        return new User();
    &#125;
    //新增保存用户
    @Transactional
    public void saveUser(User user)&#123;
        System.out.println(&quot;新增用户... &quot;);
    &#125;
&#125;
</code></pre>
<p>使用：</p>
<pre><code>@Autowired
private DataSource dataSource;
</code></pre>
<hr>
<h3 id="Spring-Boot整合Mybatis"><a href="#Spring-Boot整合Mybatis" class="headerlink" title="Spring Boot整合Mybatis"></a>Spring Boot整合Mybatis</h3><hr>
<p>pom.xml文件中：</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis.spring.boot&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;2.0.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>application.yml配置：</p>
<pre><code>mybatis:
  # 实体类别名包路径
  type-aliases-package: com.jiangtea.pojo
  # 映射文件路径
  # mapper-locations: classpath:mappers/*.xml
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
</code></pre>
<p>扫描mybatis所有的业务mapper接口配置：</p>
<pre><code>import org.mybatis.spring.annotation.MapperScan;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;

@SpringBootApplication
// 扫描mybatis所有的业务mapper接口
@MapperScan(&quot;com.jiangtea.mapper&quot;)
public class HelloSpringBootApplication &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(HelloSpringBootApplication.class, args);
    &#125;
&#125;
</code></pre>
<hr>
<h3 id="整合通用Mapper"><a href="#整合通用Mapper" class="headerlink" title="整合通用Mapper"></a>整合通用Mapper</h3><hr>
<p>pom.xml文件中：</p>
<pre><code>&lt;!-- 通用mapper --&gt;
&lt;dependency&gt;
    &lt;groupId&gt;tk.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mapper-spring-boot-starter&lt;/artifactId&gt;
    &lt;version&gt;2.1.5&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>继承<code>Mapper&lt;User&gt;</code>:</p>
<pre><code>import com.jiangtea.pojo.User;
import tk.mybatis.mapper.common.Mapper;

public interface UserMapper extends Mapper&lt;User&gt; &#123;
&#125;
</code></pre>
<p>修改启动引导类Application中的Mapper扫描注解，注意修改成<code>tk.mybatis.spring.annotation.MapperScan</code>:</p>
<pre><code>import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import tk.mybatis.spring.annotation.MapperScan;

@SpringBootApplication
// 扫描mybatis所有的业务mapper接口
@MapperScan(&quot;com.jiangtea.mapper&quot;)
public class HelloSpringBootApplication &#123;
    public static void main(String[] args) &#123;
        SpringApplication.run(HelloSpringBootApplication.class, args);
    &#125;
&#125;
</code></pre>
<p>修改User实体类添加jpa注解:</p>
<pre><code>import lombok.Data;
import tk.mybatis.mapper.annotation.KeySql;
import javax.persistence.Id;
import javax.persistence.Table;
import java.util.Date;

@Data
@Table(name = &quot;tb_user&quot;)
public class User &#123;
    @Id
    //主键回填
    @KeySql(useGeneratedKeys = true)
    private Long id;
    private String userName;
    private String password;
    private String name;
    private Integer age;
    private Integer sex;
    private Date birthday;
    private String note;
    private Date created;
    private Date updated;
&#125;
</code></pre>
<p>UserService：</p>
<pre><code>import com.jiangtea.mapper.UserMapper;
import com.jiangtea.pojo.User;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

@Service
public class UserService &#123;
    @Autowired
    private UserMapper userMapper;
    //根据id查询
    public User queryById(Long id)&#123;
        return userMapper.selectByPrimaryKey(id);
    &#125;
    //新增保存用户
    @Transactional
    public void saveUser(User user)&#123;
        System.out.println(&quot;新增用户... &quot;);
        //选择性新增；如果属性为空则该属性不会出现在insert语句上
        userMapper.insertSelective(user);
        int i = 1/0;
    &#125;
&#125;
</code></pre>
<p>编写Controller：</p>
<pre><code>import com.jiangtea.pojo.User;
import com.jiangtea.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RestController;
import javax.sql.DataSource;

@RestController
public class HelloController &#123;

    @Autowired
    private DataSource dataSource;

    @Autowired
    private UserService userService;

    /**
     * 根据用户id查询用户
     * @param id 用户id
     * @return 用户
     */
    @GetMapping(&quot;/user/&#123;id&#125;&quot;)
    public User queryById(@PathVariable Long id)&#123;
        return userService.queryById(id);
    &#125;
    @GetMapping(&quot;hello&quot;)
    public String hello()&#123;
        System.out.println(&quot; DataSource = &quot; + dataSource);
        return &quot;Hello, Spring Boot!&quot;;
    &#125;
&#125;
</code></pre>
<p>开始测试-测试地址：<code>http://localhost:8082/user/7</code> :</p>
<hr>
<h3 id="Spring-Boot整合Junit"><a href="#Spring-Boot整合Junit" class="headerlink" title="Spring Boot整合Junit"></a>Spring Boot整合Junit</h3><hr>
<p>添加依赖：</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>在类UserService上按 <code>ctrl+shift+T</code> 选择 <code>JUnit4</code> 创建测试类：</p>
<pre><code>import com.jiangtea.pojo.User;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.Date;
@RunWith(SpringRunner.class)
@SpringBootTest
public class UserServiceTest &#123;
    @Autowired
    private UserService userService;
    @Test
    public void queryById() &#123;
        User user = userService.queryById(8L);
        System.out.println(&quot;user = &quot; + user);
    &#125;
    @Test
    public void saveUser() &#123;
        User user = new User();
        user.setUserName(&quot;test2&quot;);
        user.setName(&quot;test2&quot;);
        user.setAge(13);
        user.setPassword(&quot;123456&quot;);
        user.setSex(1);
        user.setCreated(new Date());
        userService.saveUser(user);
    &#125;
&#125;
</code></pre>
<p>注意添加 <code>@SpringBootTest</code>。</p>
<hr>
<h3 id="Spring-Boot整合redis"><a href="#Spring-Boot整合redis" class="headerlink" title="Spring Boot整合redis"></a>Spring Boot整合redis</h3><hr>
<p>添加依赖:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-starter-data-redis&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>配置application.yml中修改redis的连接参数（redis需要启动）:</p>
<pre><code>spring:
  redis:
    host: localhost
    port: 6379
</code></pre>
<p>编写测试类应用RedisTemplate操作redis中的5种数据类型（string&#x2F;hash&#x2F;list&#x2F;set&#x2F;sorted set）</p>
<pre><code>import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.test.context.SpringBootTest;
import org.springframework.data.redis.core.RedisTemplate;
import org.springframework.test.context.junit4.SpringRunner;
import java.util.List;
import java.util.Set;

@RunWith(SpringRunner.class)
@SpringBootTest
public class RedisTest &#123;

    @Autowired
    private RedisTemplate redisTemplate;

    @Test
    public void test()&#123;
        //string 字符串
        //redisTemplate.opsForValue().set(&quot;str&quot;, &quot;hehe&quot;);
        redisTemplate.boundValueOps(&quot;str&quot;).set(&quot;hehe&quot;);
        System.out.println(&quot;str = &quot; + redisTemplate.opsForValue().get(&quot;str&quot;));

        //hash 散列
        redisTemplate.boundHashOps(&quot;h_key&quot;).put(&quot;name&quot;, &quot;hehe&quot;);
        redisTemplate.boundHashOps(&quot;h_key&quot;).put(&quot;age&quot;, 13);
        //获取所有域
        Set set = redisTemplate.boundHashOps(&quot;h_key&quot;).keys();
        System.out.println(&quot; hash散列的所有域：&quot; + set);
        //获取所有值
        List list = redisTemplate.boundHashOps(&quot;h_key&quot;).values();
        System.out.println(&quot; hash散列的所有域的值：&quot; + list);

        //list 列表
        redisTemplate.boundListOps(&quot;l_key&quot;).leftPush(&quot;c&quot;);
        redisTemplate.boundListOps(&quot;l_key&quot;).leftPush(&quot;b&quot;);
        redisTemplate.boundListOps(&quot;l_key&quot;).leftPush(&quot;a&quot;);
        //获取全部元素
        list = redisTemplate.boundListOps(&quot;l_key&quot;).range(0, -1);
        System.out.println(&quot; list列表中的所有元素：&quot; + list);

        // set 集合
        redisTemplate.boundSetOps(&quot;s_key&quot;).add(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;);
        set = redisTemplate.boundSetOps(&quot;s_key&quot;).members();
        System.out.println(&quot; set集合中的所有元素：&quot; + set);

        // sorted set 有序集合
        redisTemplate.boundZSetOps(&quot;z_key&quot;).add(&quot;a&quot;, 30);
        redisTemplate.boundZSetOps(&quot;z_key&quot;).add(&quot;b&quot;, 20);
        redisTemplate.boundZSetOps(&quot;z_key&quot;).add(&quot;c&quot;, 10);
        set = redisTemplate.boundZSetOps(&quot;z_key&quot;).range(0, -1);
        System.out.println(&quot; zset有序集合中的所有元素：&quot; + set);
    &#125;
&#125;
</code></pre>
<hr>
<h3 id="Spring-Boot项目部署"><a href="#Spring-Boot项目部署" class="headerlink" title="Spring Boot项目部署"></a>Spring Boot项目部署</h3><hr>
<p>pom添加打包组件:</p>
<pre><code>&lt;build&gt;
  &lt;plugins&gt;
     &lt;!-- 打jar包时如果不配置该插件，打出来的jar包没有清单文件 --&gt;
      &lt;plugin&gt;
          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
          &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;
</code></pre>
<p>可以点击右边栏maven的Lifecycle中的<code>package</code>进行打包。</p>
<p>部署：<code>java -jar 打好的jar包名字</code>。</p>
<hr>
<h2 id="maven"><a href="#maven" class="headerlink" title="maven"></a>maven</h2><h3 id="介绍-2"><a href="#介绍-2" class="headerlink" title="介绍"></a>介绍</h3><hr>
<p>maven 是一个项目管理工具，主要作用是在项目开发阶段对Java项目进行依赖管理和项目构建。</p>
<p>依赖管理：就是对jar包的管理。通过导入maven坐标，就相当于将仓库中的jar包导入了当前项目中。</p>
<p>项目构建：通过maven的一个命令就可以完成项目从清理、编译、测试、报告、打包，部署整个过程。</p>
<p>maven常用命令：clean(清理)、compile(编译)、test(测试)、package(打包)、install(安装)。</p>
<p>maven中央仓库：<a target="_blank" rel="noopener" href="https://repo1.maven.org/maven2/">https://repo1.maven.org/maven2/</a></p>
<hr>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><hr>
<p>解压 apache-maven-3.6.1.rar 既安装完成</p>
<p>配置环境变量 MAVEN_HOME 为安装路径的bin目录</p>
<p>配置本地仓库：修改 conf&#x2F;settings.xml 中的 <localRepository> 为一个指定目录</p>
<p>配置阿里云私服：修改 conf&#x2F;settings.xml 中的 <mirrors>标签，为其添加如下子标签：</p>
<pre><code>&lt;mirror&gt;  
    &lt;id&gt;alimaven&lt;/id&gt;  
    &lt;name&gt;aliyun maven&lt;/name&gt;  
    &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public/&lt;/url&gt;
    &lt;mirrorOf&gt;central&lt;/mirrorOf&gt;          
&lt;/mirror&gt;
</code></pre>
<p>如果不改本地仓库，默认下载到本地目录：</p>
<pre><code>C:\Users\Admin\.m2\repository
</code></pre>
<p>检查配置版本：</p>
<pre><code>mvn -version
</code></pre>
<hr>
<h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><hr>
<p>Maven 常用命令：</p>
<pre><code>mvn compile ：编译
mvn clean：清理
mvn test：测试
mvn package：打包
mvn install：安装
</code></pre>
<hr>
<h3 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h3><hr>
<p>Maven 构建项目生命周期描述的是一次构建过程经历经历了多少个事件。</p>
<p>Maven 对项目构建的生命周期划分为3套：</p>
<pre><code>clean：清理工作
default：核心工作，例如编译，测试，打包，安装等
site：产生报告，发布站点等
</code></pre>
<p><strong>同一生命周期内，执行后边的命令，前边的所有命令会自动执行</strong></p>
<hr>
<h3 id="IDEA-配置-Maven"><a href="#IDEA-配置-Maven" class="headerlink" title="IDEA 配置 Maven"></a>IDEA 配置 Maven</h3><hr>
<p>配置 Maven：</p>
<pre><code>选择 IDEA中 File --&gt; Settings
搜索 maven 
设置 IDEA 使用本地安装的 Maven，并修改配置文件路径。即maven home path 和 User settings file
</code></pre>
<p>IDEA 导入 Maven 项目：</p>
<pre><code>选择右侧Maven面板，点击 + 号
选中对应项目的pom.xml文件，双击即可
如果没有Maven面板，选择 View -&gt; Appearance -&gt; Tool Window Bars
</code></pre>
<p>Maven Helper插件：</p>
<pre><code>Plugins里面搜索 Maven，选择第一个 Maven Helper，点击Install安装，弹出面板中点击Accept
</code></pre>
<hr>
<h3 id="maven坐标"><a href="#maven坐标" class="headerlink" title="maven坐标"></a>maven坐标</h3><hr>
<p>Maven 中的坐标是资源的唯一标识。使用坐标来定义项目或引入项目中需要的依赖</p>
<p>Maven 坐标主要组成：</p>
<pre><code>groupId：定义当前Maven项目隶属组织名称（通常是域名反写，例如：com.tea）
artifactId：定义当前Maven项目名称（通常是模块名称，例如 order-service、goods-service）
version：定义当前项目版本号
</code></pre>
<p>使用坐标导入 jar 包：</p>
<pre><code>在 pom.xml 中编写 &lt;dependencies&gt; 标签
在 &lt;dependencies&gt; 标签中 使用 &lt;dependency&gt; 引入坐标
定义坐标的 groupId，artifactId，version
点击刷新按钮，使坐标生效
</code></pre>
<p>使用坐标导入 jar 包 – 快捷方式：</p>
<pre><code>在 pom.xml 中 按 alt + insert，选择 Dependency
在弹出的面板中搜索对应坐标，然后双击选中对应坐标
点击刷新按钮，使坐标生效
</code></pre>
<p>使用坐标导入 jar 包 – 自动导入：</p>
<pre><code>选择 IDEA中 File --&gt; Settings
在弹出的面板中找到 Build Tools
选择 Any changes，点击 ok 即可生效
</code></pre>
<hr>
<h3 id="maven的依赖范围"><a href="#maven的依赖范围" class="headerlink" title="maven的依赖范围"></a>maven的依赖范围</h3><hr>
<p>maven的依赖范围：</p>
<table>
<thead>
<tr>
<th>依赖范围</th>
<th>对于编译classpath有效</th>
<th>对于测试classpath有效</th>
<th>对于运行时classpath有效</th>
<th>例子</th>
</tr>
</thead>
<tbody><tr>
<td>compile</td>
<td>Y</td>
<td>Y</td>
<td>Y</td>
<td>spring-core</td>
</tr>
<tr>
<td>test</td>
<td>-</td>
<td>Y</td>
<td>-</td>
<td>Junit</td>
</tr>
<tr>
<td>provided</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>servlet-api</td>
</tr>
<tr>
<td>runtime</td>
<td>-</td>
<td>Y</td>
<td>Y</td>
<td>JDBC驱动</td>
</tr>
<tr>
<td>system</td>
<td>Y</td>
<td>Y</td>
<td>-</td>
<td>本地的，maven仓库之外的类库</td>
</tr>
</tbody></table>
<p>通过<code>scope</code>指定依赖范围，默认是<code>compile</code>：</p>
<pre><code>    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.12&lt;/version&gt;
        &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;
</code></pre>
<hr>
<h3 id="maven的依赖冲突"><a href="#maven的依赖冲突" class="headerlink" title="maven的依赖冲突"></a>maven的依赖冲突</h3><hr>
<p>排除依赖：可以使用<code>exclusions</code>标签将传递过来的依赖排除出去。</p>
<pre><code>&lt;exclusions&gt;
    &lt;exclusion&gt;
    ....
    &lt;/exclusion&gt;
&lt;/exclusions&gt;
</code></pre>
<p>版本锁定:采用直接锁定版本的方法确定依赖jar包的版本，版本锁定后则不考虑依赖的声明顺序或依赖的路径，以锁定的版本为准添加到工程中，此方法在企业开发中经常使用。</p>
<p>版本锁定的使用方式：第一步：在dependencyManagement标签中锁定依赖的版本;第二步：在dependencies标签中声明需要导入的maven坐标。</p>
<pre><code>&lt;!--锁定jar包的版本--&gt;
&lt;dependencyManagement&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
            &lt;version&gt;5.0.5.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework&lt;/groupId&gt;
            &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
            &lt;version&gt;5.0.5.RELEASE&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/dependencyManagement&gt;
&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.12&lt;/version&gt;
        &lt;scope&gt;compile&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-aop&lt;/artifactId&gt;
        &lt;version&gt;4.2.4.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-beans&lt;/artifactId&gt;
    &lt;/dependency&gt;

&lt;/dependencies&gt;
</code></pre>
<hr>
<h3 id="maven分模块构建"><a href="#maven分模块构建" class="headerlink" title="maven分模块构建"></a>maven分模块构建</h3><hr>
<p>分模块父工程的打包方式必须为pom：</p>
<pre><code>&lt;!--父工程的打包方式必须为pom--&gt;
&lt;packaging&gt;pom&lt;/packaging&gt;
</code></pre>
<p>子工程：</p>
<pre><code>&lt;!--表示当前maven工程继承了maven_parent父工程--&gt;
&lt;parent&gt;
    &lt;artifactId&gt;maven_parent&lt;/artifactId&gt;
    &lt;groupId&gt;com.study&lt;/groupId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
&lt;/parent&gt;
</code></pre>
<p>当前子工程依赖 子工程maven_dao：</p>
<pre><code>&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.study&lt;/groupId&gt;
        &lt;artifactId&gt;maven_dao&lt;/artifactId&gt;
        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>maven工程的聚合：在maven工程的<code>pom.xml</code>文件中可以使用<code>&lt;modules&gt;</code>标签将其他maven工程聚合到一起，聚合的目的是为了进行统一操作。例如拆分后的maven工程有多个，如果要进行打包，就需要针对每个工程分别执行打包命令，操作起来非常繁琐。这时就可以使用<code>&lt;modules&gt;</code>标签将这些工程统一聚合到maven工程中，需要打包的时候，只需要在此工程中执行一次打包命令，其下被聚合的工程就都会被打包了。</p>
<hr>
<h2 id="Mybatis"><a href="#Mybatis" class="headerlink" title="Mybatis"></a>Mybatis</h2><h3 id="介绍-3"><a href="#介绍-3" class="headerlink" title="介绍"></a>介绍</h3><hr>
<p>官网：<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/zh/index.html">https://mybatis.org/mybatis-3/zh/index.html</a> </p>
<p>MyBatis 是一款优秀的持久层框架，用于简化 JDBC 开发。</p>
<p>JavaEE三层架构：表现层、业务层、持久层。持久层：负责将数据到保存到数据库的那一层代码。</p>
<p>MyBatis 免除了几乎所有的 JDBC 代码以及设置参数和获取结果集的工作。</p>
<hr>
<h3 id="入门"><a href="#入门" class="headerlink" title="入门"></a>入门</h3><hr>
<p>创建模块，导入坐标：</p>
<pre><code>&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
        &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
        &lt;version&gt;3.4.5&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;5.1.46&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.12&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;!-- 添加slf4j日志api --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
        &lt;version&gt;1.7.25&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- 添加logback-classic依赖 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
        &lt;version&gt;1.2.3&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- 添加logback-core依赖 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
        &lt;artifactId&gt;logback-core&lt;/artifactId&gt;
        &lt;version&gt;1.2.3&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p>编写 MyBatis 核心配置文件：resources&#x2F;mybatis-config.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&gt;
&lt;configuration&gt;

    &lt;environments default=&quot;development&quot;&gt;
        &lt;environment id=&quot;development&quot;&gt;
            &lt;transactionManager type=&quot;JDBC&quot;/&gt;
            &lt;dataSource type=&quot;POOLED&quot;&gt;
                &lt;!--数据库连接信息--&gt;
                &lt;property name=&quot;driver&quot; value=&quot;com.mysql.jdbc.Driver&quot;/&gt;
                &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql:///mybatis?useSSL=false&quot;/&gt;
                &lt;property name=&quot;username&quot; value=&quot;root&quot;/&gt;
                &lt;property name=&quot;password&quot; value=&quot;******&quot;/&gt;
            &lt;/dataSource&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
    &lt;mappers&gt;
        &lt;mapper resource=&quot;UserMapper.xml&quot;/&gt;
    &lt;/mappers&gt;
&lt;/configuration&gt;
</code></pre>
<p>编写 SQL 映射文件:resources&#x2F;UserMapper.xml</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;

&lt;!-- namespace:名称空间--&gt;
&lt;mapper namespace=&quot;test&quot;&gt;
    &lt;!--statement--&gt;
    &lt;select id=&quot;selectAll&quot; resultType=&quot;com.tea.pojo.User&quot;&gt;
        select *
        from tb_user;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<p>编码：</p>
<pre><code>public static void main(String[] args) throws IOException &#123;
    //1. 加载mybatis的核心配置文件，获取 SqlSessionFactory
    String resource = &quot;mybatis-config.xml&quot;;
    InputStream inputStream = Resources.getResourceAsStream(resource);
    SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);

    //2. 获取SqlSession对象，用它来执行sql
    SqlSession sqlSession = sqlSessionFactory.openSession();
    //3. 执行sql
    List&lt;User&gt; users = sqlSession.selectList(&quot;test.selectAll&quot;);
    System.out.println(users);
    //4. 释放资源
    sqlSession.close();
&#125;
</code></pre>
<hr>
<h3 id="Idea连接数据库"><a href="#Idea连接数据库" class="headerlink" title="Idea连接数据库"></a>Idea连接数据库</h3><hr>
<p>Idea右边栏点击Database，点击加号+，输入用户名，密码，数据库，建立连接。</p>
<hr>
<h3 id="Mapper代理开发"><a href="#Mapper代理开发" class="headerlink" title="Mapper代理开发"></a>Mapper代理开发</h3><hr>
<p>定义与SQL映射文件同名的Mapper接口，并且将Mapper接口和SQL映射文件放置在同一目录下：</p>
<pre><code>在java目录下，新建com.tea.mapper.UserMapper接口
在resources目录下，新建com/tea/mapper目录，UserMapper.xml文件。注意用斜杠。
</code></pre>
<p>设置SQL映射文件的namespace属性为Mapper接口全限定名：</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;

&lt;!-- namespace:名称空间--&gt;
&lt;mapper namespace=&quot;com.tea.mapper.UserMapper&quot;&gt;
    &lt;!--statement--&gt;
    &lt;select id=&quot;selectAll&quot; resultType=&quot;com.tea.pojo.User&quot;&gt;
        select *
        from tb_user;
    &lt;/select&gt;
&lt;/mapper&gt;
</code></pre>
<p>在 Mapper 接口中定义方法，方法名就是SQL映射文件中sql语句的id，并保持参数类型和返回值类型一致:</p>
<pre><code>public interface UserMapper &#123;
    List&lt;User&gt; selectAll();
&#125;
</code></pre>
<p>配置mybatis-config.xml：</p>
<pre><code>&lt;mappers&gt;
    &lt;mapper resource=&quot;com/tea/mapper/UserMapper.xml&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<p>编码：</p>
<pre><code>public class MyBatisDemo2 &#123;
    public static void main(String[] args) throws IOException &#123;
        //1. 加载mybatis的核心配置文件，获取 SqlSessionFactory
        String resource = &quot;mybatis-config.xml&quot;;
        InputStream inputStream = Resources.getResourceAsStream(resource);
        SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);

        //2. 获取SqlSession对象，用它来执行sql
        SqlSession sqlSession = sqlSessionFactory.openSession();
        //3. 执行sql
        //List&lt;User&gt; users = sqlSession.selectList(&quot;test.selectAll&quot;);
        //3.1 获取UserMapper接口的代理对象
        UserMapper userMapper = sqlSession.getMapper(UserMapper.class);
        List&lt;User&gt; users = userMapper.selectAll();

        System.out.println(users);
        //4. 释放资源
        sqlSession.close();
    &#125;
&#125;
</code></pre>
<p>细节：如果Mapper接口名称和SQL映射文件名称相同，并在同一目录下，则可以使用包扫描的方式简化SQL映射文件的加载:</p>
<pre><code>&lt;mappers&gt;
    &lt;!--&lt;mapper resource=&quot;com/tea/mapper/UserMapper.xml&quot;/&gt;--&gt;
    &lt;!--mapper代理--&gt;
    &lt;package name=&quot;com.tea.mapper&quot;/&gt;
&lt;/mappers&gt;
</code></pre>
<hr>
<h3 id="核心配置文件"><a href="#核心配置文件" class="headerlink" title="核心配置文件"></a>核心配置文件</h3><hr>
<p>environments：配置数据库连接环境信息。可以配置多个environment，通过default属性切换不同的environment。</p>
<p>typeAliases-别名：</p>
<pre><code>mybatis-config.xml内：
&lt;typeAliases&gt;
    &lt;package name=&quot;com.tea.pojo&quot;/&gt;
&lt;/typeAliases&gt;

UserMapper.xml内：
可以不用	resultType=&quot;com.tea.pojo.User&quot;
可以直接使用	resultType=&quot;User&quot;
</code></pre>
<p><strong>mybatis-config.xml中配置各个标签时，需要遵守标签前后顺序。</strong></p>
<hr>
<h3 id="MyBatisX插件"><a href="#MyBatisX插件" class="headerlink" title="MyBatisX插件"></a>MyBatisX插件</h3><hr>
<p>MybatisX 是一款基于 IDEA 的快速开发插件，为效率而生。</p>
<p>主要功能：XML 和 接口方法 相互跳转;根据接口方法生成 statement。</p>
<hr>
<h3 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h3><hr>
<p>查询所有：</p>
<pre><code>//编写接口方法： Mapper接口：（参数：无，结果：List&lt;Brand&gt;）
public interface BrandMapper &#123;
    public List&lt;Brand&gt; selectAll();
&#125;

//编写 SQL语句： SQL映射文件：
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;
&lt;!DOCTYPE mapper
        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;

&lt;!-- namespace:名称空间--&gt;
&lt;mapper namespace=&quot;com.tea.mapper.BrandMapper&quot;&gt;
    &lt;select id=&quot;selectAll&quot; resultType=&quot;brand&quot;&gt;
        select *
        from tb_brand;
    &lt;/select&gt;
&lt;/mapper&gt;

//执行方法，测试
String resource = &quot;mybatis-config.xml&quot;;
InputStream inputStream = Resources.getResourceAsStream(resource);
SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);

SqlSession sqlSession = sqlSessionFactory.openSession();

BrandMapper brandMapper = sqlSession.getMapper(BrandMapper.class);
List&lt;Brand&gt; brands = brandMapper.selectAll();
System.out.println(brands);
sqlSession.close();
</code></pre>
<hr>
<p>数据库表的字段名称和实体类的属性名称不一样时，解决办法：</p>
<pre><code>//方法1、xml中用别名
&lt;select id=&quot;selectAll&quot; resultType=&quot;brand&quot;&gt;
    select id, brand_name as brandName, company_name as companyName, ordered, description, status
    from tb_brand;
&lt;/select&gt;

//方法2、sql片段抽取
&lt;sql id=&quot;brand_column&quot;&gt;
    id, brand_name as brandName, company_name as companyName, ordered, description, status
&lt;/sql&gt;
&lt;select id=&quot;selectAll&quot; resultType=&quot;brand&quot;&gt;
    select
    &lt;include refid=&quot;brand_column&quot; /&gt;
    from tb_brand;
&lt;/select&gt;

//方法3、resultMap
&lt;!--id：唯一标识、type：映射的类型，支持别名--&gt;
&lt;resultMap id=&quot;brandResultMap&quot; type=&quot;brand&quot;&gt;
    &lt;!--id：完成主键字段的映射、column：表的列名、property：实体类的属性名
        result：完成一般字段的映射、column：表的列名、property：实体类的属性名--&gt;
    &lt;result column=&quot;brand_name&quot; property=&quot;brandName&quot;/&gt;
    &lt;result column=&quot;company_name&quot; property=&quot;companyName&quot;/&gt;
&lt;/resultMap&gt;
&lt;select id=&quot;selectAll&quot; resultMap=&quot;brandResultMap&quot;&gt;
    select *
    from tb_brand;
&lt;/select&gt;
</code></pre>
<hr>
<p>根据Id查询：</p>
<pre><code>//编写接口方法： Mapper接口（参数：id、结果：Brand）
public interface BrandMapper &#123;
    Brand selectById(int id);
&#125;

//编写 SQL语句： SQL映射文件
&lt;select id=&quot;selectById&quot; resultMap=&quot;brandResultMap&quot;&gt;
    select *
    from tb_brand where id = #&#123;id&#125;;
&lt;/select&gt;

//执行方法，测试
int id = 1;
BrandMapper brandMapper = sqlSession.getMapper(BrandMapper.class);
Brand brand = brandMapper.selectById(id);
System.out.println(brand);
sqlSession.close();
</code></pre>
<hr>
<p>参数占位符：</p>
<pre><code>#&#123;&#125;:会将其替换为 ?，为了防止SQL注入
$&#123;&#125;：拼sql。会存在SQL注入问题

使用时机：参数传递的时候使用#&#123;&#125;;表名或者列名不固定的情况下使用$&#123;&#125; 

参数类型：parameterType：可以省略。
特殊字符处理： 转义字符；CDATA区。比如&lt;小于号，可以用 &amp;lt; 或者 &lt;![CDATA[&lt;]]&gt; 。
</code></pre>
<hr>
<p>多条件查询：三种方式</p>
<pre><code>散装参数：需要使用@Param(&quot;SQL中的参数名称&quot;)
实体类封装参数:只需要保证SQL中的参数名 和 实体类属性名对应上，即可设置成功
map集合：只需要保证SQL中的参数名 和 map集合的键的名称对应上，即可设置成功

//编写接口方法： Mapper接口(参数：所有查询条件、结果：List&lt;Brand&gt;)
//方式一：
List&lt;Brand&gt; selectByCondition(@Param(&quot;status&quot;)int status, @Param(&quot;companyName&quot;) String companyName, @Param(&quot;brandName&quot;) String brandName);
//方式二：
List&lt;Brand&gt; selectByCondition(Brand brand);
//方式三：
List&lt;Brand&gt; selectByCondition(Map map);

//编写 SQL语句： SQL映射文件
//方式一：//方式二：//方式三：
&lt;select id=&quot;selectByCondition&quot; resultMap=&quot;brandResultMap&quot;&gt;
    select * from tb_brand where status = #&#123;status&#125; and company_name like #&#123;companyName&#125; and brand_name like #&#123;brandName&#125;
&lt;/select&gt;

//执行方法，测试
//方式一：
int status = 1;
String companyName = &quot;华为&quot;;
String brandName = &quot;华为&quot;;
companyName = &quot;%&quot; + companyName + &quot;%&quot;;
brandName = &quot;%&quot; + brandName + &quot;%&quot;;

List&lt;Brand&gt; brands = brandMapper.selectByCondition(status, companyName, brandName);
System.out.println(brands);
sqlSession.close();
//方式二：
int status = 1;
String companyName = &quot;华为&quot;;
String brandName = &quot;华为&quot;;
companyName = &quot;%&quot; + companyName + &quot;%&quot;;
brandName = &quot;%&quot; + brandName + &quot;%&quot;;
Brand brand = new Brand();
brand.setStatus(status);
brand.setCompanyName(companyName);
brand.setBrandName(brandName);

List&lt;Brand&gt; brands = brandMapper.selectByCondition(brand);
System.out.println(brands);
sqlSession.close();
//方式三：
int status = 1;
String companyName = &quot;华为&quot;;
String brandName = &quot;华为&quot;;
companyName = &quot;%&quot; + companyName + &quot;%&quot;;
brandName = &quot;%&quot; + brandName + &quot;%&quot;;
Map map = new HashMap();
map.put(&quot;status&quot;, status);
map.put(&quot;companyName&quot;, companyName);
map.put(&quot;brandName&quot;, brandName);

List&lt;Brand&gt; brands = brandMapper.selectByCondition(map);
System.out.println(brands);
sqlSession.close();
</code></pre>
<hr>
<p><strong>多条件动态条件查询</strong>-动态SQL：</p>
<pre><code>&lt;select id=&quot;selectByCondition&quot; resultMap=&quot;brandResultMap&quot;&gt;
    select *
    from tb_brand
    &lt;where&gt;
        &lt;if test=&quot;status != null&quot;&gt;
            and status = #&#123;status&#125;
        &lt;/if&gt;
        &lt;if test=&quot;companyName != null and companyName != &#39;&#39; &quot;&gt;
            and company_name like #&#123;companyName&#125;
        &lt;/if&gt;
        &lt;if test=&quot;brandName != null and brandName != &#39;&#39; &quot;&gt;
            and brand_name like #&#123;brandName&#125;
        &lt;/if&gt;
    &lt;/where&gt;

&lt;/select&gt;
</code></pre>
<hr>
<p>单条件动态条件查询:</p>
<pre><code>&lt;select id=&quot;selectByConditionSingle&quot; resultMap=&quot;brandResultMap&quot;&gt;
    select * from tb_brand
    where    
    &lt;choose&gt;  &lt;!--类似于switch--&gt;
        &lt;when test=&quot;status != null&quot;&gt;  &lt;!--类似于case--&gt;
            status = #&#123;status&#125;
        &lt;/when&gt;
        &lt;when test=&quot;companyName != null and companyName !=&#39;&#39;&quot;&gt;
            company_name like #&#123;companyName&#125;
        &lt;/when&gt;
        &lt;when test=&quot;brandName != null and brandName !=&#39;&#39; &quot;&gt;
            brand_name like #&#123;brandName&#125;
        &lt;/when&gt;
        &lt;otherwise&gt;  &lt;!--类似于default--&gt;
            1 = 1
        &lt;/otherwise&gt;
    &lt;/choose&gt;
&lt;/select&gt;

或者
&lt;select id=&quot;selectByConditionSingle&quot; resultMap=&quot;brandResultMap&quot;&gt;
    select *
    from tb_brand
    &lt;where&gt;
        &lt;choose&gt;&lt;!--相当于switch--&gt;
            &lt;when test=&quot;status != null&quot;&gt;&lt;!--相当于case--&gt;
                status = #&#123;status&#125;
            &lt;/when&gt;
            &lt;when test=&quot;companyName != null and companyName != &#39;&#39; &quot;&gt;&lt;!--相当于case--&gt;
                company_name like #&#123;companyName&#125;
            &lt;/when&gt;
            &lt;when test=&quot;brandName != null and brandName != &#39;&#39;&quot;&gt;&lt;!--相当于case--&gt;
                brand_name like #&#123;brandName&#125;
            &lt;/when&gt;
        &lt;/choose&gt;
    &lt;/where&gt;
&lt;/select&gt;
</code></pre>
<hr>
<h3 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h3><hr>
<p>MyBatis事务：</p>
<pre><code>openSession()：默认开启事务，进行增删改操作后需要使用 sqlSession.commit(); 手动提交事务
openSession(true)：可以设置为自动提交事务（关闭事务）
</code></pre>
<p>添加:</p>
<pre><code>//编写接口方法： Mapper接口（参数：除了id之外的所有数据,结果：void）
public interface BrandMapper &#123;
    void add(Brand brand);
&#125;	

//编写 SQL语句： SQL映射文件
&lt;insert id=&quot;add&quot;&gt;
    insert into tb_brand (brand_name, company_name, ordered, description, status)
    values (#&#123;brandName&#125;, #&#123;companyName&#125;, #&#123;ordered&#125;, #&#123;description&#125;, #&#123;status&#125;);
&lt;/insert&gt;

//执行方法，测试
int status = 1;
String companyName = &quot;三星&quot;;
String brandName = &quot;三星&quot;;
String des = &quot;三星三星三星三星三星三星三星三星&quot;;
int ordered = 100;
Brand brand = new Brand();
brand.setStatus(status);
brand.setCompanyName(companyName);
brand.setBrandName(brandName);
brand.setDescription(des);
brand.setOrdered(ordered);

SqlSession sqlSession = sqlSessionFactory.openSession(false);

BrandMapper brandMapper = sqlSession.getMapper(BrandMapper.class);
brandMapper.add(brand);
sqlSession.commit();
sqlSession.close();
</code></pre>
<p>添加-主键返回：useGeneratedKeys和keyProperty</p>
<pre><code>&lt;insert id=&quot;add&quot; useGeneratedKeys=&quot;true&quot; keyProperty=&quot;id&quot;&gt;
    insert into tb_brand (brand_name, company_name, ordered, description, status)
    values (#&#123;brandName&#125;, #&#123;companyName&#125;, #&#123;ordered&#125;, #&#123;description&#125;, #&#123;status&#125;);
&lt;/insert&gt;
</code></pre>
<hr>
<h3 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h3><hr>
<p>修改全部字段：</p>
<pre><code>&lt;update id=&quot;update&quot;&gt;
    update tb_brand
    set
        brand_name = #&#123;brandName&#125;,
        company_name = #&#123;companyName&#125;,
        ordered = #&#123;ordered&#125;,
        description = #&#123;description&#125;,
        status = #&#123;status&#125;
    where id = #&#123;id&#125;;
&lt;/update&gt;
</code></pre>
<p>修改动态字段：</p>
<pre><code>&lt;update id=&quot;update&quot;&gt;
    update tb_brand
    &lt;set&gt;
        &lt;if test=&quot;brandName != null and brandName != &#39;&#39;&quot;&gt;
            brand_name = #&#123;brandName&#125;,
        &lt;/if&gt;
        &lt;if test=&quot;companyName != null and companyName != &#39;&#39;&quot;&gt;
            company_name = #&#123;companyName&#125;,
        &lt;/if&gt;
        &lt;if test=&quot;ordered != null&quot;&gt;
            ordered = #&#123;ordered&#125;,
        &lt;/if&gt;
        &lt;if test=&quot;description != null and description != &#39;&#39;&quot;&gt;
            description = #&#123;description&#125;,
        &lt;/if&gt;
        &lt;if test=&quot;status != null&quot;&gt;
            status = #&#123;status&#125;
        &lt;/if&gt;
    &lt;/set&gt;
    where id = #&#123;id&#125;;
&lt;/update&gt;
</code></pre>
<p>注意逗号。</p>
<hr>
<h3 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h3><hr>
<p>删除一个：</p>
<pre><code>&lt;delete id=&quot;deleteById&quot;&gt;
    delete from tb_brand where id = #&#123;id&#125;;
&lt;/delete&gt;
</code></pre>
<p>批量删除：</p>
<p>mybatis会将数组参数，封装为一个Map集合。默认：array &#x3D; 数组。使用@Param注解改变map集合的默认key的名称。</p>
<pre><code>//void deleteByIds(@Param(&quot;ids&quot;) int[] ids);	collection=&quot;ids&quot;
void deleteByIds(int[] ids);

&lt;delete id=&quot;deleteByIds&quot;&gt;
    delete from tb_brand where id
    in
        &lt;foreach collection=&quot;array&quot; item=&quot;id&quot; separator=&quot;,&quot; open=&quot;(&quot;   close=&quot;)&quot;&gt;
            #&#123;id&#125;
        &lt;/foreach&gt;
         ;
&lt;/delete&gt;
</code></pre>
<hr>
<h3 id="参数传递"><a href="#参数传递" class="headerlink" title="参数传递"></a>参数传递</h3><hr>
<p>Mybatis 接口方法中可以接收各种各样的参数，如下：</p>
<pre><code>单个参数：
    POJO类型：直接使用，属性名 和 参数占位符名称 一致
    Map集合：直接使用，键名 和 参数占位符名称 一致
    Collection：封装为Map集合，可以使用@Param注解，替换Map集合中默认的arg键名
        map.put(&quot;arg0&quot;,collection集合);
        map.put(&quot;collection&quot;,collection集合);
    List：封装为Map集合，可以使用@Param注解，替换Map集合中默认的arg键名
        map.put(&quot;arg0&quot;,list集合);
        map.put(&quot;collection&quot;,list集合);
        map.put(&quot;list&quot;,list集合);
    Array：封装为Map集合，可以使用@Param注解，替换Map集合中默认的arg键名
        map.put(&quot;arg0&quot;,数组);
        map.put(&quot;array&quot;,数组);
    其他类型：直接使用
多个参数：封装为Map集合,可以使用@Param注解，替换Map集合中默认的arg键名
    map.put(&quot;arg0&quot;,参数值1)
    map.put(&quot;param1&quot;,参数值1)
    map.put(&quot;param2&quot;,参数值2)
    map.put(&quot;agr1&quot;,参数值2)
    ---------------@Param(&quot;username&quot;)
    map.put(&quot;username&quot;,参数值1)
    map.put(&quot;param1&quot;,参数值1)
    map.put(&quot;param2&quot;,参数值2)
    map.put(&quot;agr1&quot;,参数值2)
</code></pre>
<p>Mybatis提供了ParamNameResolver类来进行参数封装。</p>
<hr>
<h3 id="注解开发"><a href="#注解开发" class="headerlink" title="注解开发"></a>注解开发</h3><hr>
<p>使用注解开发会比配置文件开发更加方便。</p>
<pre><code>@Select(value = &quot;select * from tb_user where id = #&#123;id&#125;&quot;)
public User select(int id);
</code></pre>
<p>注解完成简单功能;配置文件完成复杂功能。</p>
<pre><code>查询：@Select
添加：@Insert
修改：@Update
删除：@Delete
</code></pre>
<p>参数设置：</p>
<pre><code>@Select(value = &quot;select * from tb_user where id = #&#123;id&#125; and username = #&#123;username&#125;&quot;)
public User select(@Param(&quot;id&quot;) int id, @Param(&quot;username&quot;) String username);
</code></pre>
<p>结果集映射：</p>
<pre><code>@Select(value = &quot;select * from tb_user where id = #&#123;id&#125; and username = #&#123;username&#125;&quot;)
@ResultMap(&quot;userResultMap&quot;)
public User select(@Param(&quot;id&quot;) int id, @Param(&quot;username&quot;) String username);
</code></pre>
<hr>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer"></a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://adamright.github.io/2021/03/01/45.Spring%20Boot%E5%92%8Cmaven/">https://adamright.github.io/2021/03/01/45.Spring%20Boot%E5%92%8Cmaven/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank"></a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/maven/">
                                    <span class="chip bg-color">maven</span>
                                </a>
                            
                                <a href="/tags/Spring-Boot/">
                                    <span class="chip bg-color">Spring Boot</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2021/04/07/46.%E9%87%8F%E5%8C%96%E6%9D%82%E8%AE%B0/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="量化杂记">
                        
                        <span class="card-title">量化杂记</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2021-04-07
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/python/" class="post-category">
                                    python
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E9%87%8F%E5%8C%96/">
                        <span class="chip bg-color">量化</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/11/06/44.JVM%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%BA%95%E5%B1%82%E5%8E%9F%E7%90%86/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/16.jpg" class="responsive-img" alt="JVM虚拟机底层原理">
                        
                        <span class="card-title">JVM虚拟机底层原理</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-11-06
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Java/" class="post-category">
                                    Java
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/jvm/">
                        <span class="chip bg-color">jvm</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>


  <!-- 是否加载使用自带的 prismjs. -->
  <script type="text/javascript" src="/libs/prism/prism.min.js"></script>


<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>



    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2022</span>
            
            <a href="/about" target="_blank"></a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/adamright" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:1131045891@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1131045891" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1131045891" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
