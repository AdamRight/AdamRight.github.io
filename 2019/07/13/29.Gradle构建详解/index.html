

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;dark&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="John Doe">
  <meta name="keywords" content="">
  
  <title>Gradle构建详解 - Hexo</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  



<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","version":"1.8.9","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>My Blog</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/default.png') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Gradle构建详解">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2019-07-13 16:08" pubdate>
        2019年7月13日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      5.1k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      85
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Gradle构建详解</h1>
            
            <div class="markdown-body">
              <h2 id="1、介绍和环境搭建"><a href="#1、介绍和环境搭建" class="headerlink" title="1、介绍和环境搭建"></a>1、介绍和环境搭建</h2><p>DSL(domain specific language)：领域特定语言，解决特定问题，包括Groovy，xml等等。</p>
<p>Groovy是一种基于JVM的敏捷开发语言，可以使用java所用的库。</p>
<p>Groovy官网</p>
<pre><code>http://groovy-lang.org/
</code></pre><p>下载最新稳定版本(the latest stable version of Groovy)-2.5.8版本。</p>
<p>检查环境变量配置</p>
<pre><code>groovy -version
</code></pre><p>在Android studio中Tools - Groovy Console直接编写Groovy语言。</p>
<pre><code>println &quot;hello groovy&quot;
</code></pre><h2 id="2、语法"><a href="#2、语法" class="headerlink" title="2、语法"></a>2、语法</h2><h3 id="2-1、基础语法"><a href="#2-1、基础语法" class="headerlink" title="2.1、基础语法"></a>2.1、基础语法</h3><p>groovy变量的类型都是对象类型，没有基本类型，因为基本类型都会装箱成对象类型。</p>
<p>变量的定义包括强类型定义和弱类型def定义。</p>
<pre><code>def x = 10
println x.class  //class java.lang.Integer
</code></pre><p>字符串除了String还有GString，GString的常用三种定义方式</p>
<pre><code>def s1 = &apos;a single \&apos;a\&apos; String&apos;
println s1  //a single &apos;a&apos; String

def s2 = &apos;&apos;&apos;\
line one
line two
line three
&apos;&apos;&apos;
println s2  //line one
            //line two
            //line three

def s3 = &quot;a common String&quot;
def say = &quot;this is $&#123;s3&#125;&quot;   //花括号可扩展任意的表达式
println say  //this is a common String
println say.class  //class org.codehaus.groovy.runtime.GStringImpl
</code></pre><p>新增常用操作符</p>
<pre><code>def str = &quot;groovy&quot;
//println str.center(9,&apos;a&apos;)   //agroovyaa
//println str.padLeft(9,&apos;a&apos;)  //aaagroovy
//println str.padRight(9,&apos;a&apos;)  //groovyaaa

def str2 = &apos;Hello&apos;
println str &gt; str2  //true

println str[0]  //g
println str[0..1]  //gr

def str3 = &apos;gro&apos;
println str.minus(str3) //ovy
println str - str3 //ovy

//println str.reverse()   //yvoorg
println str.capitalize()   //Groovy
println str.isNumber()   //false
</code></pre><p>逻辑控制:</p>
<p>switch</p>
<pre><code>def x = 1.23
def result
switch (x)&#123;
    case &quot;str&quot;:
        result = &apos;str&apos;
        break
    case [4,6,7,&apos;inlist&apos;]:  //list
        result = &apos;list&apos;
        break
    case 12..30:    //范围
        result = &apos;range&apos;
        break
    case Integer:
        result = &apos;Integer&apos;
        break
    case BigDecimal:
        result = &apos;BigDecimal&apos;
        break
    default:result = &apos;default&apos;
&#125;
println result  //BigDecimal
</code></pre><p>for范围</p>
<pre><code>def sum = 0
for (i in 0..9)&#123;
    sum += i
&#125;
println sum //45
</code></pre><p>list循环</p>
<pre><code>def sum = 0
for (i in [1,2,3,4,5,6,7,8,9])&#123;
    sum += i
&#125;
println sum //45
</code></pre><p>map循环</p>
<pre><code>def sum = 0
for (i in [&apos;wang&apos;:1,&apos;zhang&apos;:2,&apos;li&apos;:3])&#123;
    sum += i.value
&#125;
println sum //6
</code></pre><h3 id="2-2、闭包"><a href="#2-2、闭包" class="headerlink" title="2.2、闭包"></a>2.2、闭包</h3><p>类似于方法</p>
<pre><code>def clouser = &#123; println &quot;Hello groovy&quot;&#125;
clouser.call()  //调用方式一，Hello groovy
clouser()  //调用方式二，Hello groovy
</code></pre><p>有参数的闭包<code>-&gt;</code>前的是参数,也可以有多个参数</p>
<pre><code>def clouser = &#123;String name -&gt; println &quot;$&#123;name&#125; Hello groovy&quot;&#125;
clouser.call(&quot;this is&quot;)  //调用方式一，this is Hello groovy
clouser(&quot;this is&quot;)  //调用方式二，this is Hello groovy
</code></pre><p>隐式的it参数,不需要定义参数</p>
<pre><code>def clouser = &#123;println &quot;Hello $&#123;it&#125;&quot;&#125;
clouser(&quot;groovy&quot;)  //Hello groovy
</code></pre><p>返回值</p>
<pre><code>def clouser = &#123;String name -&gt; return  &quot;Hello $&#123;name&#125;&quot;&#125;
println clouser(&quot;groovy&quot;)  //Hello groovy
</code></pre><p>基本类型和闭包结合使用</p>
<pre><code>int x = cal(5)
println x   
//num的阶乘
int fab(int number) &#123;
    int result = 1
    1.upto(number, &#123; num -&gt; result *= num &#125;)
    return result
&#125;

int fab2(int number) &#123;
    int result = 1
    number.downto(1) &#123;
        num -&gt; result *= num
    &#125;
    return result
&#125;

//累加
int cal(int number) &#123;
    int result = 0
    number.times &#123;
        num -&gt; result += num
    &#125;
    return result
&#125;
</code></pre><p>字符串和闭包结合使用</p>
<pre><code>String str = &apos;2 and 3 is 5&apos;

//each遍历
str.each &#123;
//    String temp -&gt; println temp.multiply(2)
    String temp -&gt; println temp
&#125;

//find查找符合条件的第一个,findAll查找所有符合条件的放到集合
println str.find&#123;
    String s -&gt; s.isNumber()
&#125;

def list = str.findAll&#123;
    String s -&gt; s.isNumber()
&#125;
println list.toListString() //[2, 3, 5]

def result = str.any &#123;
    String s -&gt; s.isNumber()    //有一项是数字就返回true
&#125;
println result //true

println str.every &#123; //false
    String s -&gt; s.isNumber()    //每一项都是数字就返回true
&#125;

def list2 = str.collect&#123;
    it.toUpperCase()
&#125;
println list2.toListString()    //[2,  , A, N, D,  , 3,  , I, S,  , 5]
</code></pre><p>闭包进阶</p>
<p>变量：this、owner、delegate</p>
<pre><code>def scriptClouser = &#123;
    println &quot;this:&quot; + this  //代表闭包定义处的类
    println &quot;owner:&quot; + owner    //代表闭包定义处的类或者对象
    println &quot;delegate:&quot; + delegate  //代表任意对象，默认与owner一致
&#125;
scriptClouser.call()

class Person&#123;//内部类
    def classClouser = &#123;
        println &quot;classClouser this:&quot; + this  //代表闭包定义处的类
        println &quot;classClouser owner:&quot; + owner    //代表闭包定义处的类或者对象
        println &quot;classClouser delegate:&quot; + delegate  //代表任意对象，默认与owner一致
    &#125;

    def say()&#123;
        def classClouser = &#123;
            println &quot;method classClouser this:&quot; + this  //代表闭包定义处的类
            println &quot;method classClouser owner:&quot; + owner    //代表闭包定义处的类或者对象
            println &quot;method classClouser delegate:&quot; + delegate  //代表任意对象，默认与owner一致
        &#125;
        classClouser.call()
    &#125;
&#125;
Person person = new Person()
person.classClouser.call()
person.say()

def nextClouser = &#123;
    def innerClouser = &#123;
        println &quot;innerClouser this:&quot; + this  //代表闭包定义处的类
        println &quot;innerClouser owner:&quot; + owner    //代表闭包定义处的类或者对象
        println &quot;innerClouser delegate:&quot; + delegate  //代表任意对象，默认与owner一致
    &#125;
    innerClouser.delegate = person  //修改delegate
    innerClouser.call()
&#125;
nextClouser.call()
</code></pre><p>闭包委托策略</p>
<pre><code>class Student &#123;
    String name
    def pretty = &#123;
        &quot;My name is $&#123;name&#125;&quot;
    &#125;
    String toSting()&#123;
        pretty.call()
    &#125;
&#125;
class Teacher &#123;
    String name
&#125;

def stu = new Student(name: &apos;Sarash&apos;)
def tea = new Teacher(name: &apos;Qndroid&apos;)
stu.pretty.delegate = tea
stu.pretty.resolveStrategy = Closure.DELEGATE_FIRST//delegate优先
println stu.toSting()   //My name is Qndroid
</code></pre><h3 id="2-3、列表list"><a href="#2-3、列表list" class="headerlink" title="2.3、列表list"></a>2.3、列表list</h3><p>数组和列表定义方式</p>
<pre><code>def array = [1, 2, 3, 4, 5, 6] as int[]
int[] array2 = [1, 2, 3, 4, 5, 6]
def list = [1, 2, 3, 4, 5, 6]
</code></pre><p>主要介绍特有的</p>
<pre><code>//排序
def sortList = [1, -4, 5, -6, 2, 3]
//Collections.sort(sortList)
//println sortList    //[-6, -4, 1, 2, 3, 5]
sortList.sort()
println sortList    //[-6, -4, 1, 2, 3, 5]

//自定义排序
//Comparator mc = &#123; a, b -&gt;
//    a == b ? 0 : Math.abs(a) &lt; Math.abs(b) ? -1 : 1
//&#125;
//Collections.sort(sortList, mc)
//println sortList    //[1, 2, 3, -4, 5, -6]
sortList.sort &#123; a, b -&gt;
    a == b ? 0 : Math.abs(a) &lt; Math.abs(b) ? -1 : 1
&#125;
println sortList    //[1, 2, 3, -4, 5, -6]

//字符串排序
def sortStringList = [&apos;123&apos;, &apos;a&apos;, &apos;groovy&apos;]
sortStringList.sort &#123; it -&gt; return it.size() &#125;
println sortStringList  //[a, 123, groovy]

//查找
def findList = [-3, 8, -8, 12, 4, 7]
int result = findList.find &#123; return it % 2 == 0 &#125;
println result  //8
def result2 = findList.findAll &#123; return it % 2 == 0 &#125;
println result2.toListString()  //[8, -8, 12, 4]

def result3 = findList.any &#123; return it % 2 != 0 &#125;
println result3 //true
def result4 = findList.every &#123; return it % 2 != 0 &#125;
println result4 //false

println findList.min()  //-8
println findList.max()  //12

def num = findList.count &#123; return it % 2 == 0 &#125; //符合条件的个数
println num //4
</code></pre><h3 id="2-4、映射map"><a href="#2-4、映射map" class="headerlink" title="2.4、映射map"></a>2.4、映射map</h3><p>定义和基本操作</p>
<pre><code>def colors = [red: &apos;ff0000&apos;, green: &apos;00ff00&apos;, blue: &apos;0000ff&apos;]
println colors.getClass()   //class java.util.LinkedHashMap
//索引
println colors[&apos;red&apos;]   //ff0000
println colors.red  //ff0000
//添加
colors.yellow = &apos;ffff00&apos;
println colors.toMapString()    //[red:ff0000, green:00ff00, blue:0000ff, yellow:ffff00]
</code></pre><p>其他操作</p>
<pre><code>def students = [
        1: [number: &apos;0001&apos;, name: &apos;zhang&apos;, score: 55, sex: &apos;male&apos;],
        2: [number: &apos;0002&apos;, name: &apos;li&apos;, score: 62, sex: &apos;female&apos;],
        3: [number: &apos;0003&apos;, name: &apos;wang&apos;, score: 63, sex: &apos;female&apos;],
        4: [number: &apos;0004&apos;, name: &apos;zhao&apos;, score: 66, sex: &apos;male&apos;]
]
//遍历
students.each &#123;
    def student -&gt; println student.key + &quot;:&quot; + student.value
&#125;
//带索引
students.eachWithIndex &#123;
    def student, int index -&gt; println index + &apos;::&apos; + student.key + &quot;:&quot; + student.value
&#125;
//直接遍历
students.each &#123;
    key, value -&gt; println key + &quot;:&quot; + value
&#125;
students.eachWithIndex &#123;
    key, value, index -&gt; println index + &apos;:::&apos; + key + &quot;:&quot; + value
&#125;
//查找
def entry = students.find &#123; def student -&gt;
    return student.value.score &gt;= 60
&#125;
println entry   //2=&#123;number=0002, name=li, score=62, sex=female&#125;

def entry2 = students.findAll &#123; def student -&gt;
    return student.value.score &gt;= 60
&#125;
println entry2
//计数
def count = students.count &#123;
    def student -&gt; return student.value.score &gt;= 60 &amp;&amp; student.value.sex == &apos;male&apos;
&#125;
println count   //1
//查找并筛选
def names = students.findAll &#123;
    def student -&gt; return student.value.score &gt;= 60
&#125;.collect &#123;
    return it.value.name
&#125;
println names   //[li, wang, zhao]
//分组
def group = students.groupBy &#123;
    def student -&gt; return student.value.score &gt;= 60 ? &apos;及格&apos; : &apos;不及格&apos;
&#125;
println group.toMapString()
//排序
def sort = students.sort&#123;
    def stu1 ,def stu2-&gt;
        Number num1 = stu1.value.score
        Number num2 = stu2.value.score
        return num1 == num2 ? 0 : num1 &lt; num2 ? -1 : 1
&#125;
println sort.toMapString()
</code></pre><h3 id="2-5、范围range"><a href="#2-5、范围range" class="headerlink" title="2.5、范围range"></a>2.5、范围range</h3><p>定义和使用</p>
<pre><code>def range = 1..10
println range[0]    //1
println range.contains(10)    //true
println range.from    //1
println range.to    //10

//遍历
range.each &#123;
    println it
&#125;
//switch中使用
def result = getGrade(75)
println result
def getGrade(Number number)&#123;
    def result
    switch (number)&#123;
        case 0..&lt;60:
            result = &apos;不及格&apos;
            break
        case 60..&lt;70:
            result = &apos;及格&apos;
            break
        case 70..&lt;80:
            result = &apos;良好&apos;
            break
        case 80..100:
            result = &apos;优秀&apos;
            break
    &#125;
    return result
&#125;
</code></pre><h3 id="2-6、面向对象"><a href="#2-6、面向对象" class="headerlink" title="2.6、面向对象"></a>2.6、面向对象</h3><p>类、方法、接口</p>
<pre><code>//groovy中默认都是public类型
class Person implements Action&#123;
    String name
    Integer age

    def increasseAge(Integer years) &#123;
        this.age += years
    &#125;

    @Override
    void eat() &#123;&#125;
    @Override
    void drink() &#123;&#125;
    @Override
    void play() &#123;&#125;
&#125;

def person = new Person(name: &quot;zhang&quot;, age: 26)
println &quot;name:$&#123;person.name&#125;,age:$&#123;person.age&#125;&quot;//name:zhang,age:26
person.increasseAge(10)
println &quot;name:$&#123;person.name&#125;,age:$&#123;person.age&#125;&quot;//name:zhang,age:36

interface Action&#123;
    void eat()
    void drink()
    void play()
&#125;

trait DefaultAction&#123;
    abstract void eat()
    void play()&#123;
        println &apos;i can play&apos;
    &#125;
&#125;
</code></pre><p>元编程</p>
<pre><code>class Person &#123;
    String name
    Integer age

    def increasseAge(Integer years) &#123;
        this.age += years
    &#125;

    //一个方法找不到时候，用它代替
    def invokeMethod(String name, Object args) &#123;
        return &quot;invokeMethod: $&#123;name&#125;,$&#123;args&#125;&quot;
    &#125;
    //优先级高于invokeMethod
    def methodMissing(String name, Object args) &#123;
        return &quot;methodMissing: $&#123;name&#125;,$&#123;args&#125;&quot;
    &#125;
&#125;

def person = new Person(name: &apos;zhang&apos;, age: 26)
println person.cry()

//为类动态添加属性
Person.metaClass.sex = &apos;male&apos;
def person1 = new Person(name: &apos;zhang&apos;, age: 26)
println person1.sex     //male
//为类动态添加方法
Person.metaClass.sexUpperCase = &#123; -&gt; sex.toUpperCase() &#125;
def personn2 = new Person(name: &apos;zhang&apos;, age: 26)
println personn2.sexUpperCase()     //MALE
//添加静态方法
Person.metaClass.static.createPerson = &#123;
    String name, int age -&gt; new Person(name: name, age: age)
&#125;
def personn3 = Person.createPerson(&apos;li&apos;, 18)
println personn3.name + personn3.age  //li18
</code></pre><p>一次注入，应用程序其他方法都可以使用</p>
<pre><code>ExpandoMetaClass.enableGlobally()
</code></pre><h2 id="3、高级用法"><a href="#3、高级用法" class="headerlink" title="3、高级用法"></a>3、高级用法</h2><h3 id="3-1、json文件处理"><a href="#3-1、json文件处理" class="headerlink" title="3.1、json文件处理"></a>3.1、json文件处理</h3><p>转换成json</p>
<pre><code>import groovy.json.JsonOutput
import groovy.json.JsonSlurper

class Person &#123;
    String name
    Integer age
&#125;
//转换成Json
def list = [new Person(name: &apos;zhang&apos;, age: 26),
            new Person(name: &apos;li&apos;, age: 22)]
def json = JsonOutput.toJson(list)
println JsonOutput.prettyPrint(json)
//转成实体对象
def jsonSlpuer = new JsonSlurper()
jsonSlpuer.parseText()
</code></pre><p>get请求</p>
<pre><code>import groovy.json.JsonSlurper

def response = getNetworkData(&quot;http://httpbin.org/get?id=123&quot;)
println response.args.id
def getNetworkData(String url)&#123;
    def connection = new URL(url).openConnection()
    connection.setRequestMethod(&apos;GET&apos;)
    connection.connect()
    def response = connection.content.text
    def jsonSlurper = new JsonSlurper()
    return jsonSlurper.parseText(response)
&#125;
</code></pre><h3 id="3-2、xml读取和生成"><a href="#3-2、xml读取和生成" class="headerlink" title="3.2、xml读取和生成"></a>3.2、xml读取和生成</h3><p>解析xml格式数据，创建xml格式数据，都不再详解</p>
<h3 id="3-3、文件操作"><a href="#3-3、文件操作" class="headerlink" title="3.3、文件操作"></a>3.3、文件操作</h3><p>读取文件</p>
<pre><code>def file = new File(&quot;目标文件&quot;)
//方式一
file.eachLine &#123;
    line -&gt; println line
&#125;
//方式二
def text = file.getText()
println text
//方式三
def result = file.readLines()
println result
//方式四,读取部分内容
def reader = file.withReader &#123;
    reader -&gt; char[] buffer = new char[100]
        reader.read(buffer)
        return buffer
&#125;
println reader
</code></pre><p>拷贝文件</p>
<pre><code>def copy(String sourcePath, String destationPath) &#123;
    try &#123;
        def desFile = new File(destationPath)
        if (!desFile.exists()) &#123;
            desFile.createNewFile()
        &#125;
        new File(sourcePath).withReader &#123;
            reader -&gt;
                def lines = reader.readLines()
                desFile.withWriter &#123;
                    writer -&gt;
                        lines.each &#123;
                            line -&gt; writer.append(line + &quot;\r\n&quot;)
                        &#125;
                &#125;
        &#125;
        return true
    &#125; catch (Exception e) &#123;

    &#125;
&#125;
</code></pre><p>对象的读写</p>
<pre><code>def saveObject(Object object, String path) &#123;
    try &#123;
        def desFile = new File(path)
        if (!desFile.exists()) &#123;
            desFile.createNewFile()
        &#125;
        desFile.withObjectOutputStream &#123;
            out -&gt; out.writeObject(object)
        &#125;
        return true
    &#125; catch (Exception e) &#123;

    &#125;
    return false
&#125;

def readObject(String path) &#123;
    def obj = null
    try &#123;
        def file = new File(path)
        if (file == null || !file.exists()) return null
        file.withObjectInputStream &#123;
            input -&gt; obj = input.readObject()
        &#125;
    &#125; catch (Exception e) &#123;

    &#125;
    return obj
&#125;
</code></pre><h2 id="4、Gradle介绍"><a href="#4、Gradle介绍" class="headerlink" title="4、Gradle介绍"></a>4、Gradle介绍</h2><p>Gradle用于构建应用程序，使用Groovy核心语法。</p>
<p>在Terminal中执行</p>
<pre><code>gradlew clean    //win
gradlew build    //win

./gradlew clean    //mac
./gradlew build    //mac
</code></pre><p>gradle的生命周期</p>
<pre><code>initialization初始化阶段：根据settings.gradle解析整个工程中所有的Project，构建所有的Project对应的project对象。
Configuration配置阶段：解析所有的projects对象中的task，构建好所有的task的拓扑图
Excution执行阶段：执行具体的task及其依赖task
</code></pre><p>生命周期监听</p>
<pre><code>//配置阶段开始前的监听回调
this.beforeEvaluate &#123;
    println &apos;------配置阶段开始------&apos;
&#125;
//配置阶段完成以后的监听回调
this.afterEvaluate &#123;
    println &apos;------配置阶段完成------&apos;
&#125;
//gradle执行完毕后的回调监听
this.gradle.buildFinished &#123;
    println &apos;------gradle执行完毕------&apos;
&#125;
//等同beforeEvaluate
this.gradle.beforeProject &#123;&#125;
//等同afterEvaluate
this.gradle.afterProject &#123;&#125;
</code></pre><h2 id="5、Project"><a href="#5、Project" class="headerlink" title="5、Project"></a>5、Project</h2><p>查看Project的个数</p>
<pre><code>gradlew projects
./gradlew projects    //mac
</code></pre><h3 id="5-1、Project相关API"><a href="#5-1、Project相关API" class="headerlink" title="5.1、Project相关API"></a>5.1、Project相关API</h3><p>在最外层的根的build.gradle中</p>
<pre><code>this.getProjects()
def getProjects()&#123;
    //只输全部projects
    this.getAllprojects().eachWithIndex &#123;
        Project project, int index -&gt;
        if (index ==0)&#123;
            println &quot;this is Root project:$&#123;project.name&#125;&quot;
        &#125; else &#123;
            println &quot;this is project:$&#123;project.name&#125;&quot;
        &#125;
    &#125;
    //只输出子projects
    this.getSubprojects().eachWithIndex &#123;
        Project project, int index -&gt;
            println &quot;this is project:$&#123;project.name&#125;&quot;
    &#125;
    //只输出根projects
    println &quot;this is Root project:&quot; + this.getRootProject().name
&#125;
</code></pre><p>在module的build.gradle中</p>
<pre><code>//只输出父projects
println &quot;this is parent project:&quot; + this.getParent().name
</code></pre><p>根project中可以配置module的配置</p>
<pre><code>//根project配置module为app的配置
project(&apos;app&apos;) &#123;
    Project project -&gt;
        println project.name    //app
        apply plugin: &apos;com.android.application&apos;
        group &apos;com.tea&apos;
        version &apos;1.0.0-release&apos;
        dependencies &#123;&#125;
        android &#123;&#125;
&#125;
</code></pre><p>配置当前节点工程和subproject的所有project</p>
<pre><code>//配置当前节点工程和subproject的所有project
allprojects &#123;
    group &apos;com.tea&apos;
    version &apos;1.0.0-release&apos;
&#125;
println project(&apos;app&apos;).group
</code></pre><p>不包括当前节点工程，只包括他的subproject</p>
<pre><code>//不包括当前节点工程，只包括他的subproject
subprojects &#123;
    Project project -&gt;
        if (project.plugins.hasPlugin(&apos;com.android.library&apos;)) &#123;
            apply from: &apos;../publistTOMaven.gradle&apos;
        &#125;
&#125;
</code></pre><h3 id="5-2、属性相关API"><a href="#5-2、属性相关API" class="headerlink" title="5.2、属性相关API"></a>5.2、属性相关API</h3><p>定义扩展属性</p>
<pre><code>ext&#123;&#125;
</code></pre><p>所以提供扩展属性定义方式:</p>
<p>方式一：</p>
<p>可以在根build中定义</p>
<pre><code>ext &#123;
    compileSdkVersion = 28
    cardview = &apos;com.android.support:cardview-v7:28.0.0&apos;
&#125;
</code></pre><p>然后在需要用的build中引用</p>
<pre><code>compileSdkVersion this.rootProject.compileSdkVersion
implementation this.cardview
</code></pre><p>方式二：</p>
<p>和根build同级定义common.gradle</p>
<pre><code>ext &#123;

    android = [compileSdkVersion: 28,
               buildToolsVersion: &apos;26.0.0&apos;,
               applicationId    : &apos;com.tea&apos;,
               minSdkVersion    : 16,
               targetSdkVersion : 26,
               versionCode      : 1,
               versionName      : &apos;1.0.0&apos;,
               multiDexEnabled  : true]

    signConfigs = [&apos;storeFile&apos;    : &apos;tea.jks&apos;,
                   &apos;storePassword&apos;: &apos;tea123456&apos;,
                   &apos;keyAlias&apos;     : &apos;android&apos;,
                   &apos;keyPassword&apos;  : &apos;tea123456&apos;]

    java = [&apos;javaVersion&apos;: JavaVersion.VERSION_1_8]

    dependence = [&apos;libCardview&apos; : &apos;com.android.support:cardview-v7:28.0.0&apos;,
                  &apos;libAppcompat&apos;: &apos;com.android.support:appcompat-v7:28.0.0&apos;]
&#125;
</code></pre><p>在根build中引入</p>
<pre><code>apply from: this.file(&apos;common.gradle&apos;)
</code></pre><p>在需要的build中使用</p>
<pre><code>compileSdkVersion rootProject.ext.android.compileSdkVersion
implementation rootProject.ext.dependence.libCardview
</code></pre><p>方式三：</p>
<p>在gradle.properties中定义<code>key:value</code>形式</p>
<pre><code>mCompileSdkVersion = 28
</code></pre><p>build中使用，默认都是字符串，需要转换</p>
<pre><code>compileSdkVersion mCompileSdkVersion.toInteger()
</code></pre><h3 id="5-3、file相关API"><a href="#5-3、file相关API" class="headerlink" title="5.3、file相关API"></a>5.3、file相关API</h3><p>文件路径获取</p>
<pre><code>println getRootDir().absolutePath
println getBuildDir().absolutePath
println getProjectDir().absolutePath
</code></pre><p>文件定位</p>
<pre><code>apply from: this.file(&apos;common.gradle&apos;)

println getContent(&apos;common.gradle&apos;)
def getContent(String path)&#123;
    try &#123;
        //路径是相对于当前project查找
        def file = file(path)
        return file.text
    &#125;catch (GradleException e)&#123;
        println &quot;not found&quot;
    &#125;
    return null
&#125;
</code></pre><p>文件拷贝,在app的build中拷贝文件或者文件夹</p>
<pre><code>copy &#123;
    from file(&apos;build/outputs/apk/&apos;)
    into getRootProject().getBuildDir().path + &apos;/apk/&apos;
    exclude &#123;&#125;//补拷贝的文件
    rename &#123;&#125;//重命名
&#125;
</code></pre><p>文件树</p>
<pre><code>fileTree(&apos;src/main/assets/&apos;)&#123;FileTree fileTree -&gt;
    fileTree.visit &#123;FileTreeElement element -&gt;
        println element.file.name
        copy &#123;
            from element.file
            into getRootProject().getBuildDir().path + &apos;/test/&apos;
        &#125;
    &#125;
&#125;
</code></pre><h3 id="5-4、依赖相关API"><a href="#5-4、依赖相关API" class="headerlink" title="5.4、依赖相关API"></a>5.4、依赖相关API</h3><p>依赖</p>
<pre><code>buildscript &#123;    
    //配置工程的仓库地址
    repositories &#123;    &#125;
    //配置工程的gradle插件依赖地址，app中的是项目的第三库依赖
    dependencies &#123;    &#125;
&#125;
</code></pre><p>依赖冲突常用解决办法</p>
<pre><code>compile (&apos;rootProject.ext.dependence.libAutoScrollViewPager&apos;) &#123;
    exclude module: &apos;support-v4&apos;//排除依赖
    exclude group: &apos;com.android.support&apos;
    transitive false//禁止传递依赖
&#125;
</code></pre><p>provided只在编译起作用，占位编译。</p>
<h3 id="5-5、外部命令API"><a href="#5-5、外部命令API" class="headerlink" title="5.5、外部命令API"></a>5.5、外部命令API</h3><p>调用系统指令，执行<code>./gradlew apkcopy</code></p>
<pre><code>task(name: &apos;apkcopy&apos;) &#123;
    doLast &#123;
        def srcPath = this.buildDir.path + &apos;/outputs/apk&apos;
        def destPath = &apos;./target/apk&apos;
        def command = &quot;mv -f $&#123;srcPath&#125; $&#123;destPath&#125;&quot;
        exec &#123;
            try &#123;
                executable &apos;bash&apos;
                args &apos;-c&apos;, command
                println &apos;this command exec success&apos;
            &#125;catch(GradleException e)&#123;
                println &apos;this command exec error&apos;
            &#125;
        &#125;
    &#125;
&#125;
</code></pre><p>调用脚本</p>
<pre><code>task stopTomcat(type:Exec) &#123;
    //dir
    workingDir &apos;../tomcat/bin&apos;
    //windows
    commandLine &apos;cmd&apos;, &apos;/c&apos;, &apos;stop.bat&apos;
    //linux
    commandLine &apos;./stop.sh&apos;
&#125;
</code></pre><h2 id="6、task"><a href="#6、task" class="headerlink" title="6、task"></a>6、task</h2><h3 id="两种定义方式"><a href="#两种定义方式" class="headerlink" title="两种定义方式"></a>两种定义方式</h3><pre><code>task helloTask (group: &apos;com.tea&apos;,description: &apos;study&apos;)&#123;
    println &apos;---------helloTask&apos;
&#125;

this.tasks.create(name : &apos;helloTask2&apos;)&#123;
    setGroup(&apos;com.tea&apos;)
    setDescription(&apos;study&apos;)
    println &apos;---------helloTask2&apos;
&#125;
</code></pre><h3 id="doFirst和doLast"><a href="#doFirst和doLast" class="headerlink" title="doFirst和doLast"></a>doFirst和doLast</h3><pre><code>task helloTask (group: &apos;com.tea&apos;,description: &apos;study&apos;)&#123;
    println &apos;---------helloTask&apos;
    doFirst &#123;
        println &apos;---------helloTask---doFirst&apos;
    &#125;
&#125;
helloTask.doFirst&#123;
    println &apos;---------helloTask---doFirst2&apos;//比闭包的先执行
&#125;
</code></pre><h3 id="统计Build时长"><a href="#统计Build时长" class="headerlink" title="统计Build时长"></a>统计Build时长</h3><pre><code>def startTime,endTime
this.afterEvaluate &#123;Project project -&gt;
    def  preBuildTask = project.tasks.getByName(&apos;preBuild&apos;)
    preBuildTask.doFirst &#123;
        startTime = System.currentTimeMillis()
        println &quot;==============:&quot; + startTime
    &#125;
    def buildTask = project.tasks.getByName(&apos;build&apos;)
    buildTask.doLast &#123;
        endTime = System.currentTimeMillis()
        println &quot;==============:&quot; + endTime
        println &quot;==============:&quot; + (endTime - startTime)
    &#125;
&#125;
</code></pre><h3 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h3><pre><code>task taskX &#123;
    doLast &#123;
        println &quot;taskX&quot;
    &#125;
&#125;
task taskY &#123;
    doLast &#123;
        println &quot;taskY&quot;
    &#125;
&#125;
//动态依赖
task taskZ &#123;
    dependsOn this.tasks.findAll &#123;
        task -&gt;
            println task.name
            return task.name.startsWith(&apos;taskX&apos;)
    &#125;
    doLast &#123;
        println &quot;taskZ&quot;
    &#125;
&#125;
//静态依赖
task taskZ(dependsOn: [taskX, taskY]) &#123;
    dependsOn this.tasks.findAll &#123;
        task -&gt; return task.name.startsWith(&apos;lib&apos;)
    &#125;
    doLast &#123;
        println &quot;taskZ&quot;
    &#125;
&#125;
//或者
taskZ.dependsOn(taskX, taskY)
</code></pre><h3 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h3><pre><code>task writeTask&#123;
    //输入
    inputs.property(&quot;key&quot;,&quot;value&quot;)
    def data = inputs.getProperties()
    //输出
    outputs.file 文件
    File file = outputs.getFiles().getSingleFile()
&#125;
</code></pre><h3 id="执行顺序指定"><a href="#执行顺序指定" class="headerlink" title="执行顺序指定"></a>执行顺序指定</h3><pre><code>mustRunAfter
</code></pre><h2 id="7、其他模块"><a href="#7、其他模块" class="headerlink" title="7、其他模块"></a>7、其他模块</h2><h3 id="7-1、SourceSet"><a href="#7-1、SourceSet" class="headerlink" title="7.1、SourceSet"></a>7.1、SourceSet</h3><p>修改资源路径</p>
<pre><code>sourceSets &#123;
    main&#123;
        jniLibs.srcDirs = [&apos;libs&apos;]//修改so库文件位置
    &#125;
&#125;
</code></pre><p>给res分模块分包</p>
<pre><code>sourceSets &#123;
    main&#123;
        res.srcDirs = [&apos;src/main/res&apos;,
                       &apos;src/main/res-ad&apos;,
                       &apos;src/main/res-tea&apos;]
    &#125;
&#125;
</code></pre><h3 id="7-2、自定义plugin"><a href="#7-2、自定义plugin" class="headerlink" title="7.2、自定义plugin"></a>7.2、自定义plugin</h3><hr>
<p>main下的java替换成groovy，新建.groovy类：</p>
<pre><code>class GradleStudyPlugin implements Plugin&lt;Project&gt;&#123;
    @Override
    void apply (Project project)&#123;
        project.extensions.create(&apos;comTea&apos;,xxx（groovy类）)    
    &#125;

&#125;
</code></pre><p>自定义task的类</p>
<pre><code>class xxxxx extend DefaultTask&#123;
    @TaskAction
    void doAction()&#123;
        //执行于gradle执行阶段的代码
    &#125;
&#125;
</code></pre><p>main/resources/META-INF.gradle/包名.properties:</p>
<pre><code>implementation-class=包名.类名
</code></pre><p>build.gradle为：</p>
<pre><code>apply plugin: &apos;groovy&apos;
sourceSets &#123;
    main&#123;
        groovy &#123;
            srcDir &apos;src/main/groovy&apos;
        &#125;
        resources &#123;
            srcDir &apos;src/main/resources&apos;
        &#125;
    &#125;
&#125;
</code></pre><p>引用和传参</p>
<pre><code>apply plugin: &apos;包名&apos;

comTea&#123;
    //传参
&#125;
</code></pre><hr>
<h3 id="7-3、修改apk名字"><a href="#7-3、修改apk名字" class="headerlink" title="7.3、修改apk名字"></a>7.3、修改apk名字</h3><p>app的build中</p>
<pre><code>this.afterEvaluate &#123;
    this.android.applicationVariants.all &#123; variant -&gt;
        def output = variant.outputs.first()
        def apkName = &quot;app-$&#123;variant.baseName&#125;&quot; + &quot;-$&#123;variant.versionName&#125;.apk&quot;
        output.outputFile = new File(output.outputFile.parent,apkName)
        println &quot;------------------&quot;
    &#125;
&#125; 
</code></pre><h2 id="8、Jenkins"><a href="#8、Jenkins" class="headerlink" title="8、Jenkins"></a>8、Jenkins</h2><pre><code>java -jar jenkins.war 
</code></pre><h2 id="Android实战应用"><a href="#Android实战应用" class="headerlink" title="Android实战应用"></a>Android实战应用</h2><h3 id="buildTypes和productFlavors"><a href="#buildTypes和productFlavors" class="headerlink" title="buildTypes和productFlavors"></a>buildTypes和productFlavors</h3><hr>
<p>和main同级别，同包名，创建文件，区别使用debug还是release。可以用来实现类似gradle调用java类。</p>
<hr>
<h3 id="implementation"><a href="#implementation" class="headerlink" title="implementation"></a>implementation</h3><hr>
<p>implementation：不会传递依赖；compile / api：会传递依赖；api 是 compile 的替代品。当依赖被传递时，二级依赖的改动会导致0级项目重新编译；当依赖不传递时，二级依赖的改动不会导致 0 级项目重新编译。</p>
<hr>
<h3 id="plugin"><a href="#plugin" class="headerlink" title="plugin"></a>plugin</h3><hr>
<p><code>android&#123;&#125;</code>的内容就是对<code>apply plugin: &#39;com.android.application&#39;</code>的配置。</p>
<p>参考上述<code>7.2、自定义plugin</code>。</p>
<p>新建Module-<code>Java Library</code>-buildSrc模块</p>
<p>创建目录<code>\buildSrc\src\main\resources\META-INF\gradle-plugins</code>，创建文件xxx.properties</p>
<pre><code>implementation-class=com.plugin.demo.PluginDemo
</code></pre><p>目录<code>buildSrc\src\main\groovy\com\plugin\demo</code>创建文件PluginDemo.groovy</p>
<pre><code>import com.android.build.gradle.BaseExtension
import org.gradle.api.Plugin
import org.gradle.api.Project
public class PluginDemo implements Plugin&lt;Project&gt; &#123;
    @Override
    public void apply(Project project) &#123;
        def extension = project.extensions.create(&apos;yyyy&apos;, ExtensionDemo)
        project.afterEvaluate &#123;
            println &quot;Hello $&#123;extension.name&#125;!&quot;//Hello zzzzz
        &#125;
        //def transform = new TransformDemo()
        //def baseExtension = project.extensions.getByType(BaseExtension)
        //baseExtension.registerTransform(transform)
    &#125;
&#125;
</code></pre><p>创建文件ExtensionDemo.groovy</p>
<pre><code>public class ExtensionDemo &#123;
    def name = &quot;Author&quot;;
&#125;
</code></pre><p>在app的build中使用plugin</p>
<pre><code>apply plugin: &apos;xxx&apos;

yyyy &#123;
    name &apos;zzzzz&apos;
&#125;
</code></pre><p>关于 buildSrc 目录：这是 gradle 的一个特殊目录，这个目录的 build.gradle 会自动被执行，即使不配配置进<code>settings.gradle</code>。buildSrc 的执行早于任何一个 project，也早于 settings.gradle。它是一个独立的存在。 buildSrc 所配置出来的 Plugin 会被自动添加到编译过程中的每一个 project 的 classpath，因此它们才可以直接使用 <code>apply plugin: &#39;xxx&#39;</code>的方式来便捷应用这些 plugin。</p>
<p>settings.gradle 中如果配置了 ‘:buildSrc’ ，buildSrc 目录就会被当做是子 Project ，因此会被执行两遍。所以在 settings.gradle 里面应该删掉 <code>:buildSrc</code> 的配置。</p>
<hr>
<h3 id="Transform"><a href="#Transform" class="headerlink" title="Transform"></a>Transform</h3><hr>
<p>Transform是由 Android 提供的，在项目构建过程中把编译后的文件（jar文件和 class文件）添加自定义的中间处理过程的工具。下面代码只是把编译完的内容原封不动搬运到目标位置，没有实际用处。要修改字节码，需要引入其他工具，例如 javassist。</p>
<p>新建TransformDemo.groovy</p>
<pre><code>import com.android.build.api.transform.Format
import com.android.build.api.transform.QualifiedContent
import com.android.build.api.transform.Transform
import com.android.build.api.transform.TransformException
import com.android.build.api.transform.TransformInvocation
import com.android.build.gradle.internal.pipeline.TransformManager
import com.android.utils.FileUtils;

public class TransformDemo extends Transform &#123;
    @Override
    String getName() &#123;
        return &quot;hencoderTransform&quot;
    &#125;

    @Override
    Set&lt;QualifiedContent.ContentType&gt; getInputTypes() &#123;
        return TransformManager.CONTENT_CLASS
    &#125;

    @Override
    Set&lt;? super QualifiedContent.Scope&gt; getScopes() &#123;
        return TransformManager.SCOPE_FULL_PROJECT
    &#125;

    @Override
    boolean isIncremental() &#123;
        return false
    &#125;

    @Override
    void transform(TransformInvocation transformInvocation) throws TransformException, InterruptedException, IOException &#123;

        def inputs = transformInvocation.inputs
        def outputProvider = transformInvocation.outputProvider

        inputs.each &#123;
            it.jarInputs.each &#123;
                File dest = outputProvider.getContentLocation(it.name, it.contentTypes, it.scopes, Format.JAR)
                FileUtils.copyFile(it.file, dest)
            &#125;

            it.directoryInputs.each &#123;
                File dest = outputProvider.getContentLocation(it.name, it.contentTypes, it.scopes, Format.DIRECTORY)
                FileUtils.copyDirectory(it.file, dest)
            &#125;
        &#125;
    &#125;
&#125;
</code></pre><p>buildSrc-build中改为：</p>
<pre><code>repositories &#123;
    google()
    jcenter()
&#125;

dependencies &#123;
    implementation &apos;com.android.tools.build:gradle:3.2.1&apos;
&#125;
</code></pre><p>PluginDemo.groovy中添加代码</p>
<pre><code>def transform = new TransformDemo()
def baseExtension = project.extensions.getByType(BaseExtension)
baseExtension.registerTransform(transform)
</code></pre><p>修改app-build中的plugin放在android{}之后。</p>
<p>示例：<a target="_blank" rel="noopener" href="https://github.com/liangzhitao/consuming-collector">https://github.com/liangzhitao/consuming-collector</a></p>
<hr>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/Android/">Android</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/gradle/">gradle</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    本博客所有文章除特别声明外，均采用 <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 协议</a> ，转载请注明出处！
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2019/11/29/30.adb%E5%91%BD%E4%BB%A4/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">adb命令</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2019/07/07/28.%E6%89%8B%E5%86%99%E5%AE%9E%E7%8E%B0EventBus/">
                        <span class="hidden-mobile">手写实现EventBus</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>






  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      $('#local-search-input').on('click', function() {
        searchFunc(path, 'local-search-input', 'local-search-result');
      });
      $('#modalSearch').on('shown.bs.modal', function() {
        $('#local-search-input').focus();
      });
    })()
  </script>















<!-- 主题的启动项 保持在最底部 -->
<script  src="/js/boot.js" ></script>


</body>
</html>
